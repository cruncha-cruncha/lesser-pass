{"version":3,"sources":["components/DB/connect.js","components/DB/addUserListener.js","components/DB/createUserProfile.js","components/DB/updateUserAcc.js","components/DB/deleteUserAcc.js","components/Login/state/atoms.js","components/Login/index.js","components/Login/useLogin.js","components/List/state/atoms.js","components/crypto/BaseN.js","components/crypto/encrypt.js","components/List/components/AddModal/validateField.js","components/List/components/AddModal/index.js","components/List/components/DeleteModal/index.js","components/List/index.js","components/List/useList.js","App.js","reportWebVitals.js","index.js"],"names":["firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","connect","a","firebase","apps","length","initializeApp","addUserListener","uid","cb","db","firestore","collection","doc","onSnapshot","s","e","createUserProfile","get","then","snapshot","exists","set","updateUserAcc","accId","data","deleteUserAcc","delete","LOGIN_ENUM","loginState","atom","key","default","uidState","Login","useRecoilState","login","setLogin","setUid","useEffect","useLogin","auth","onAuthStateChanged","user","Row","Col","className","Button","onClick","useDeviceLanguage","provider","GoogleAuthProvider","signInWithRedirect","disabled","variant","signOut","masterPasswordState","BaseN","alphabet","blockMaxBitsCount","Object","freeze","encodeBytes","getOptimalBitsCount","charsCount","maxBitsCount","radix","blockBitsCount","bitsCount","blockCharsCount","charsCountInBits","mainBitsLength","Math","floor","tailBitsLength","mainCharsCount","tailCharsCount","iterCount","result","i","bits","getBitsN","bitPos","bitsToChars","chars","ind","count","block","bigCharsCount","BigInt","join","localBlock","_","cloneDeep","remainder","curBytePos","curBitInBytePos","shift","xLength","min","x2Length","n1","logBaseN","charsCountLog","log","maxRatio","n","l1","ceil","ratio","x","r","calcPassword","profile","masterPassword","account","username","index","salt","toString","pbkdf2er","plainText","iterations","digest","password","substring","window","crypto","subtle","importKey","stringToArrayBuffer","algo","name","hash","deriveKey","derivedKey","exportKey","keyArray","byteArr","bufferToByteArray","string","charList","unescape","encodeURIComponent","split","arrayBuffer","push","charCodeAt","Uint8Array","Array","from","validateField","field","value","valid","coerced","AddModal","isOpen","save","cancel","useState","setAccount","setUsername","setLength","setIndex","notes","setNotes","invalid","setInvalid","newInvalid","reduce","output","val","Modal","show","animation","onHide","Header","closeButton","Title","Body","Form","Group","Label","Control","type","isInvalid","includes","onChange","target","Footer","DeleteModal","num","goDelete","btnStateReducer","state","action","payload","showEditBtn","showDeleteBtn","showClearBtn","showAddBtn","wantToAdd","showCheckboxes","amEditing","wantToDelete","initialBtnState","List","gridApi","setGridApi","hideMasterPassword","setHideMasterPassword","staticSelected","setStaticSelected","useReducer","btnState","dispatchBtn","setMasterPassword","masterTimeout","setMasterTimeout","useRecoilValue","hide","setHide","accs","setAccs","newAccs","docs","map","d","id","clearTimeout","newTimeout","setTimeout","console","addNewAcc","uuid","uuidv4","updateAccs","next","forEach","rest","validData","deleteAccs","genPassword","useList","handleRowClick","navigator","clipboard","writeText","setEnableCellTextSelection","getSelectedRows","accIds","handleGoDelete","controlId","placeholder","style","height","rowData","onGridReady","api","defaultColDef","editable","column","node","getColDef","suppressMovable","isSelected","resizable","filter","sortable","onRowDataChanged","forEachNode","setSelected","singleClickEdit","enableCellTextSelection","rowSelection","onNewColumnsLoaded","refreshCells","onSelectionChanged","suppressRowClickSelection","getRowNodeId","onRowClicked","flex","headerCheckboxSelection","checkboxSelection","minWidth","width","deselectAll","stopEditing","setRowData","exportDataAsCsv","columnKeys","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ee495e9a.chunk.js","sourcesContent":["// Firebase App (the core Firebase SDK) is always required and must be listed first\nimport firebase from \"firebase/app\";\n// If you are using v7 or any earlier version of the JS SDK, you should import firebase using namespace import\n// import * as firebase from \"firebase/app\"\n\n// If you enabled Analytics in your project, add the Firebase SDK for Analytics\nimport \"firebase/analytics\";\n\n// Add the Firebase products that you want to use\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBSR0d-BPHVVGdlCJcjaDNZhFSt9CH_7vU\",\n  authDomain: \"lesser-pass.firebaseapp.com\",\n  projectId: \"lesser-pass\",\n  storageBucket: \"lesser-pass.appspot.com\",\n  messagingSenderId: \"386351610572\",\n  appId: \"1:386351610572:web:0a5032f9797b7f4f452069\",\n  measurementId: \"G-C7WK4HJ5EJ\"\n};\n\nexport const connect = async () => {\n  if (!firebase.apps.length) {\n    await firebase.initializeApp(firebaseConfig);\n  }\n}","import firebase from \"firebase/app\";\n\nimport { connect } from './connect';\n\nexport const addUserListener = async ({ uid, cb }) => {\n  if (!uid || !cb) {\n    return;\n  }\n  \n  await connect();\n  const db = firebase.firestore();\n  return db.collection('data').doc(uid).collection('accounts').onSnapshot(s => cb(s), e => {});\n}","import firebase from \"firebase/app\";\n\nimport { connect } from './connect';\n\nexport const createUserProfile = async ({ uid }) => {\n  if (!uid) {\n    return;\n  }\n  \n  await connect();\n  const db = firebase.firestore();\n  await db.collection('data').doc(uid).get().then(async (snapshot) => {\n    if (!snapshot.exists) {\n      await db.collection('data').doc(uid).set({});\n    }\n  });\n}","import firebase from \"firebase/app\";\n\nimport { connect } from './connect';\n\nexport const updateUserAcc = async ({ uid, accId, data }) => {\n  if (!uid || !accId || !data) {\n    return;\n  }\n  \n  await connect();\n  const db = firebase.firestore();\n  await db.collection('data').doc(uid).collection('accounts').doc(accId).set(data);\n}","import firebase from \"firebase/app\";\n\nimport { connect } from './connect';\n\nexport const deleteUserAcc = async ({ uid, accId }) => {\n  if (!uid || !accId) {\n    return;\n  }\n  \n  await connect();\n  const db = firebase.firestore();\n  await db.collection('data').doc(uid).collection('accounts').doc(accId).delete();\n}","import { atom } from 'recoil';\n\nexport const LOGIN_ENUM = {\n  'unknown': 0,\n  'out': 1,\n  'temptIn': 2,\n  'in': 3,\n  'temptOut': 4\n};\n\nexport const loginState = atom({\n  key: 'login',\n  default: LOGIN_ENUM['unknown']\n});\n\nexport const uidState = atom({\n  key: 'uid',\n  default: ''\n});","import React, { useEffect } from 'react';\nimport { Button, Row, Col } from 'react-bootstrap';\nimport firebase from \"firebase/app\";\n\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nimport { createUserProfile } from '../DB';\nimport { LOGIN_ENUM } from './state';\nimport { useLogin } from './useLogin';\n\nexport const Login = () => {\n  const { login, setLogin, setUid } = useLogin();\n\n  const handleLogin = () => {\n    setLogin(LOGIN_ENUM['temptIn']);\n    firebase.auth().useDeviceLanguage();\n    const provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().signInWithRedirect(provider);\n  }\n\n  const handleLogout = () => {\n    setLogin(LOGIN_ENUM['temptOut']);\n    firebase.auth().signOut().then(() => {\n      setLogin(LOGIN_ENUM['out']);\n    });\n  }\n\n  useEffect(() => {\n    return firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        setUid(user.uid);\n        setLogin(LOGIN_ENUM[\"in\"]);\n        createUserProfile({ uid: user.uid });\n      } else {\n        setLogin(LOGIN_ENUM['out']);\n      }\n    });\n  }, []);\n\n  return (\n    <Row>\n      <Col className=\"d-flex justify-content-end\">\n        {login === LOGIN_ENUM['unknown'] &&\n          <span>loading</span>}\n        {(login === LOGIN_ENUM['out'] || login === LOGIN_ENUM['temptIn']) && \n          <Button\n            onClick={handleLogin}\n            disabled={login !== LOGIN_ENUM['out']}\n          >\n            Login\n          </Button>}\n        {(login === LOGIN_ENUM['in'] || login === LOGIN_ENUM['temptOut']) &&\n          <Button\n            variant=\"secondary\"\n            onClick={handleLogout}\n            disabled={login !== LOGIN_ENUM['in']}\n          >\n            Logout\n          </Button>}\n      </Col>\n    </Row>\n  )\n}","import { useEffect } from 'react';\nimport { useRecoilState } from 'recoil';\n\nimport { loginState, uidState, LOGIN_ENUM } from './state';\n\nexport const useLogin = () => {\n  const [login, setLogin] = useRecoilState(loginState);\n  const [uid, setUid] = useRecoilState(uidState);\n\n  useEffect(() => {\n    if (login === LOGIN_ENUM['out']) {\n      setUid('');\n    }\n  }, [login]);\n\n  return {\n    login,\n    setLogin,\n    setUid\n  };\n}","import { atom } from 'recoil';\n\nexport const masterPasswordState = atom({\n  key: 'masterPassword',\n  default: ''\n});","import _ from 'lodash';\n\n// adapted from https://github.com/KvanTTT/BaseNcoding/blob/master/res/BaseN.js\n\nexport function BaseN ({ alphabet, blockMaxBitsCount }) {\n  const encodeBytes = (data) => {\n    if (!data || data.length === 0) {\n      return \"\";\n    }\n  \n    let {\n      bitsCount: blockBitsCount,\n      charsCountInBits: blockCharsCount\n    } = getOptimalBitsCount({\n      charsCount: alphabet.length,\n      maxBitsCount: blockMaxBitsCount,\n      radix: 2\n    });\n  \n    const mainBitsLength = Math.floor(data.length * 8 / blockBitsCount) * blockBitsCount;\n    const tailBitsLength = data.length * 8 - mainBitsLength;\n    const mainCharsCount = Math.floor(mainBitsLength * blockCharsCount / blockBitsCount);\n    const tailCharsCount = Math.floor((tailBitsLength * blockCharsCount + blockBitsCount - 1) / blockBitsCount);\n    const iterCount = Math.floor(mainCharsCount / blockCharsCount);\n  \n    const result = [];\n  \n    for (let i = 0; i < iterCount; i++) {\n      const bitPos = i * blockBitsCount;\n      const bits = getBitsN({ data, bitPos, bitsCount: blockBitsCount});\n      bitsToChars({\n        chars: result,\n        ind: i * blockCharsCount,\n        count: blockCharsCount,\n        block: bits,\n        bigCharsCount: BigInt(alphabet.length), \n        alphabet\n      });\n    }\n  \n    if (tailBitsLength != 0) {\n      const bits = getBitsN({ data, bitPos: mainBitsLength, bitsCount: tailBitsLength });\n      bitsToChars({\n        chars: result,\n        ind: mainCharsCount,\n        count: tailCharsCount,\n        block: bits,\n        bigCharsCount: BigInt(alphabet.length),\n        alphabet\n      });\n    }\n  \n    return result.join(\"\");\n  }\n\n  return Object.freeze({\n    encodeBytes\n  });\n}\n\nconst bitsToChars = ({ chars, ind, count, block, bigCharsCount, alphabet }) => {\n  let localBlock = _.cloneDeep(block);\n  for (let i = 0; i < count; i++) {\n    const remainder = localBlock % bigCharsCount;\n    chars[ind + i] = alphabet[remainder];\n    localBlock = localBlock / bigCharsCount;\n  }\n}\n\nconst getBitsN = ({ data, bitPos, bitsCount }) => {\n  let result = BigInt(0);\n\n  let curBytePos = Math.floor(bitPos / 8);\n  let curBitInBytePos = bitPos % 8;\n  const shift = 8 - curBitInBytePos;\n  let xLength = Math.min(bitsCount, shift);\n\n  if (xLength != 0) {\n    result = BigInt((data[curBytePos] >> shift - xLength) & ((1 << shift) - 1)) << BigInt(bitsCount - xLength);\n\n    curBytePos += Math.floor((curBitInBytePos + xLength) / 8);\n    curBitInBytePos = (curBitInBytePos + xLength) % 8;\n\n    let x2Length = bitsCount - xLength;\n    if (x2Length > 8) {\n      x2Length = 8;\n    }\n\n    while (x2Length > 0) {\n      xLength += x2Length;\n      result |= BigInt(data[curBytePos] >> 8 - x2Length) << BigInt(bitsCount - xLength);\n\n      curBytePos += Math.floor((curBitInBytePos + x2Length) / 8);\n      curBitInBytePos = (curBitInBytePos + x2Length) % 8;\n\n      x2Length = bitsCount - xLength;\n      if (x2Length > 8) {\n        x2Length = 8;\n      }\n    }\n  }\n\n  return result;\n}\n\nconst getOptimalBitsCount = ({ charsCount, maxBitsCount, radix }) => {\n  let bitsCount = 0;\n  let charsCountInBits = 0;\n  const n1 = logBaseN(charsCount, radix);\n  const charsCountLog = Math.log(radix) / Math.log(charsCount);\n  let maxRatio = 0;\n\n  for (let n = n1; n <= maxBitsCount; n++) {\n    let l1 = Math.ceil(n * charsCountLog);\n    let ratio = n / l1;\n    if (ratio > maxRatio) {\n      maxRatio = ratio;\n      bitsCount = n;\n      charsCountInBits = l1;\n    }\n  }\n\n  return { bitsCount, charsCountInBits };\n}\n\n// ???\nconst logBaseN = (x, n) => {\n  let r = 0;\n  while ((x = Math.floor(x / n)) !== 0) {\n    r++;\n  }  \n  return r;\n}","import { BaseN } from './BaseN';\n\n// adapted from https://github.com/lesspass/lesspass\n\nexport const calcPassword = async ({ profile, masterPassword }) => {\n  const { account, username, index, length } = profile;\n  if (!index || !length || length < 1 || length > 40) {\n    return '';\n  }\n\n  const salt = account + username + index.toString(16);\n  const password = await pbkdf2er({ plainText: masterPassword, salt, iterations: 250000, digest: \"SHA-256\"});\n  return password.substring(0, length);\n}\n\nconst getAlphabet = () =>\n  '!\"#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~';\n\nfunction pbkdf2er({ plainText, salt, iterations, digest }) {\n  if (!plainText || !salt) {\n    return '';\n  }\n\n  return window.crypto.subtle\n    .importKey(\n      \"raw\", // format\n      stringToArrayBuffer(plainText), // keyData\n      \"PBKDF2\", // algorithm\n      false, // extractable\n      [\"deriveKey\"] // keyUsages\n    ).then((key) => {\n      const algo = {\n        name: \"PBKDF2\",\n        salt: stringToArrayBuffer(salt),\n        iterations,\n        hash: digest,\n      };\n      return window.crypto.subtle.deriveKey(\n        algo, // algorithm\n        key, // baseKey\n        {\n          name: \"AES-CTR\",\n          length: 256,\n        }, // derivedKeyAlgorithm\n        true, // extractable\n        [\"encrypt\", \"decrypt\"] // keyUsages\n      );\n    }).then((derivedKey) =>\n      window.crypto.subtle.exportKey(\"raw\", derivedKey).then((keyArray) => {\n        const byteArr = bufferToByteArray(keyArray);\n\n        const converted = new BaseN({\n          alphabet: getAlphabet(),\n          blockMaxBitsCount: 32\n        }).encodeBytes(byteArr);\n\n        return converted;\n      })\n    );\n};\n\nfunction stringToArrayBuffer(string) {\n  const base64String = unescape(encodeURIComponent(string));\n  const charList = base64String.split(\"\");\n  const arrayBuffer = [];\n  for (let i = 0; i < charList.length; i += 1) {\n    arrayBuffer.push(charList[i].charCodeAt(0));\n  }\n  return new Uint8Array(arrayBuffer);\n}\n\nconst bufferToByteArray = (keyArray) => Array.from(new Uint8Array(keyArray));\n","export const validateField = ({ field, value }) => {\n  switch (field) {\n    case \"account\": {\n      const max = 140;\n      if (!value || value.length < 1) {\n        return { valid: false };\n      } else if (value.length > max) {\n        return { valid: false, coerced: value.substring(0, max) };\n      } else {\n        return { valid: true, coerced: value };\n      }\n    }\n    case \"username\": {\n      const max = 140;\n      if (!value || value.length < 1) {\n        return { valid: false };\n      } else if (value.length > max) {\n        return { valid: false, coerced: value.substring(0, max) };\n      } else {\n        return { valid: true, coerced: value };\n      }\n    }\n    case \"length\": {\n      const max = 40;\n      if (!value || value < 1) {\n        return { valid: false, coerced: 1 };\n      } else if (value.length > max) {\n        return { valid: false, coerced: max };\n      } else {\n        return { valid: true, coerced: value };\n      }\n    }\n    case \"index\": {\n      if (!value) {\n        return { valid: false, coerced: 0 };\n      } else {\n        return { valid: true, coerced: value };\n      }\n    }\n    case \"notes\": {\n      const max = 512;\n      if (value && value.length > max) {\n        return { valid: false, coerced: value.substring(0, max) };\n      } else {\n        return { valid: true, coerced: value };\n      }\n    }\n    default:\n      return { valid: false };\n  }\n}","import { useEffect, useState } from 'react';\nimport { Button, Modal, Form } from 'react-bootstrap';\n\nimport { validateField } from './validateField';\n\nexport const AddModal = ({ isOpen, save, cancel }) => {\n  const [account, setAccount] = useState('');\n  const [username, setUsername] = useState('');\n  const [length, setLength] = useState(16);\n  const [index, setIndex] = useState(1);\n  const [notes, setNotes] = useState('');\n  const [invalid, setInvalid] = useState([]);\n\n  useEffect(() => {\n    const toCheck = [\n      { field: \"account\", value: account },\n      { field: \"username\", value: username },\n      { field: \"length\", value: length },\n      { field: \"index\", value: index },\n      { field: \"notes\", value: notes }\n    ];\n\n    const newInvalid = toCheck.reduce((output, val) => {\n      const { valid } = validateField(val);\n      if (!valid) {\n        return [ ...output, val.field ];\n      } else {\n        return [ ...output ];\n      }\n    }, []);\n\n    setInvalid(newInvalid);\n  }, [account, username, length, index]);\n\n  useEffect(() => {\n    setAccount('');\n    setUsername('');\n    setLength(16);\n    setIndex(1);\n    setNotes('');\n  }, [isOpen]);\n\n  const handleSave = () => {\n    save({ account, username, length, index, notes });\n  }\n\n  return (\n    <Modal show={isOpen} animation={false} onHide={cancel}>\n      <Modal.Header closeButton>\n        <Modal.Title>Modal title</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <Form>\n          <Form.Group>\n            <Form.Label>Account</Form.Label>\n            <Form.Control type=\"text\" isInvalid={invalid.includes('account')} value={account} onChange={e => setAccount(e.target.value)}/>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label>Username</Form.Label>\n            <Form.Control type=\"text\" isInvalid={invalid.includes('username')} value={username} onChange={e => setUsername(e.target.value)}/>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label>Length</Form.Label>\n            <Form.Control type=\"number\" isInvalid={invalid.includes('length')} value={length} onChange={e => setLength(e.target.value)}/>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label>Index</Form.Label>\n            <Form.Control type=\"number\" isInvalid={invalid.includes('index')} value={index} onChange={e => setIndex(e.target.value)}/>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label>Notes</Form.Label>\n            <Form.Control type=\"text\" isInvalid={invalid.includes('notes')} value={notes} onChange={e => setNotes(e.target.value)}/>\n          </Form.Group>\n        </Form>\n      </Modal.Body>\n\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={cancel}>Cancel</Button>\n        <Button variant=\"primary\" disabled={invalid.length !== 0} onClick={handleSave}>Add</Button>\n      </Modal.Footer>\n    </Modal>\n  )\n}","\n\nimport { Button, Modal } from 'react-bootstrap';\n\nexport const DeleteModal = ({ isOpen, num, goDelete, cancel }) => {\n  return (\n    <Modal show={isOpen} animation={false} onHide={cancel}>\n      <Modal.Header closeButton>\n        <Modal.Title>Modal title</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <span>Delete {num} account{num === 1 ? '' : 's'}? This action cannot be reversed.</span>\n      </Modal.Body>\n\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={cancel}>Cancel</Button>\n        <Button variant=\"danger\" onClick={goDelete}>Delete</Button>\n      </Modal.Footer>\n    </Modal>\n  )\n}","import React, { useEffect, useState, useReducer } from 'react';\nimport { Row, Col, Button, Form } from 'react-bootstrap';\nimport { AgGridColumn, AgGridReact } from 'ag-grid-react';\nimport _ from 'lodash';\n\nimport 'ag-grid-community/dist/styles/ag-grid.css';\nimport 'ag-grid-community/dist/styles/ag-theme-alpine.css';\n\nimport { useList } from './useList';\nimport { AddModal } from './components/AddModal';\nimport { DeleteModal } from './components/DeleteModal';\n\nconst btnStateReducer = (state, action) => {\n  const payload = action.payload;\n  switch (action.type) {\n    case 'select':\n      if (payload.length === 0) {\n        return { ...state, showEditBtn: false, showDeleteBtn: false, showClearBtn: false, showAddBtn: true };\n      } else {\n        return { ...state, showEditBtn: true, showDeleteBtn: true, showClearBtn: true, showAddBtn: false };\n      }\n    case 'add':\n      return { ...state, wantToAdd: payload };\n    case 'edit':\n      if (payload === 'start') {\n        return { ...state, showCheckboxes: false, amEditing: true, showEditBtn: true, showDeleteBtn: false, showClearBtn: false, showAddBtn: false };\n      } else {\n        return { ...state, showCheckboxes: true, amEditing: false, showEditBtn: true, showDeleteBtn: true, showClearBtn: true, showAddBtn: false };\n      }\n    case 'delete':\n      if (payload === 'open') {\n        return { ...state, wantToDelete: true };\n      } else if (payload === 0) {\n        return { ...state, wantToDelete: false };\n      } else {\n        return { ...state, wantToDelete: false, showEditBtn: false, showDeleteBtn: false, showClearBtn: false, showAddBtn: true };\n      }\n    case 'clear':\n      return { ...state, showEditBtn: false, showDeleteBtn: false, showClearBtn: false, showAddBtn: true };\n    default:\n      return state;\n  }\n}\n\nconst initialBtnState = {\n  showEditBtn: false,\n  amEditing: false,\n  showDeleteBtn: false,\n  wantToDelete: false,\n  showClearBtn: false,\n  showAddBtn: true,\n  wantToAdd: false,\n  showCheckboxes: true\n};\n\nexport const List = () => {\n  const [gridApi, setGridApi] = useState(null);\n  const [hideMasterPassword, setHideMasterPassword] = useState(true);\n  const [staticSelected, setStaticSelected] = useState([]);\n  const [btnState, dispatchBtn] = useReducer(btnStateReducer, initialBtnState)\n\n  const {\n    hide,\n    masterPassword,\n    setMasterPassword,\n    accs,\n    addNewAcc,\n    updateAccs,\n    deleteAccs,\n    genPassword\n  } = useList();\n\n  const toggleMasterPasswordHidden = () => {\n    setHideMasterPassword(!hideMasterPassword);\n  }\n\n  const handleClear = () => {\n    setStaticSelected([]);\n    dispatchBtn({ type: 'clear' });\n    if (gridApi) {\n      gridApi.deselectAll();\n    }\n  }\n\n  const handleSelectionChange = () => {\n    dispatchBtn({ type: 'select', payload: gridApi.getSelectedRows() });\n  }\n\n  const handleAddNew = () => {\n    dispatchBtn({ type: 'add', payload: true });\n  }\n\n  const handleEdit = () => {\n    if (btnState.amEditing) {\n      gridApi.setRowData(accs);\n      dispatchBtn({ type: 'edit', payload: 'cancel' });\n    } else {\n      setStaticSelected(gridApi.getSelectedRows().map(r => r.id));\n      dispatchBtn({ type: 'edit', payload: 'start' });\n    }\n  }\n\n  const handleSaveEdit = () => {\n    dispatchBtn({ type: 'edit', payload: 'save' });\n    gridApi.stopEditing();\n    updateAccs({ next: gridApi.getSelectedRows() });\n    gridApi.setRowData( _.cloneDeep(accs) );\n  }\n\n  const handleDelete = () => {\n    setStaticSelected(gridApi.getSelectedRows().map(r => r.id));\n    dispatchBtn({ type: 'delete', payload: 'open' });\n  }\n\n  const handleGoDelete = () => {\n    setStaticSelected([]);\n    const accIds = gridApi.getSelectedRows().map(r => r.id);\n    dispatchBtn({ type: 'delete', payload: accIds.length });\n    deleteAccs(accIds);\n  }\n\n  const handleCancelDelete = () => {\n    dispatchBtn({ type: 'delete', payload: 0 })\n  }\n\n  const handleRowDataChanged = () => {\n    if (gridApi) {\n      if (gridApi.getSelectedRows().length === 0 && staticSelected.length > 0) {\n        gridApi.forEachNode(n => {\n            n.setSelected(staticSelected.includes(n.id));\n        });\n      }\n    }\n  }\n\n  const handleExport = () => {\n    if (gridApi) {\n      gridApi.exportDataAsCsv({\n        columnKeys: [\"account\", \"username\", \"length\", \"index\", \"notes\"]\n      });\n    }\n  }\n\n  const handleRowClick = async ({ data }) => {\n    if (!btnState.amEditing) {\n      navigator.clipboard.writeText(await genPassword(data));\n    }\n  }\n\n  useEffect(() => {\n    if (gridApi) {\n      if (btnState.amEditing) {\n        gridApi.setEnableCellTextSelection(false);\n      } else {\n        gridApi.setEnableCellTextSelection(true);\n      }\n    }\n  }, [btnState.amEditing]);  \n\n  return (\n    <>\n      {!hide && (\n      <div>\n        <AddModal\n          isOpen={btnState.wantToAdd}\n          save={(data) => { addNewAcc(data); dispatchBtn({ type: 'add', payload: false }); }}\n          cancel={() => dispatchBtn({ type: 'add', payload: false })}\n        />\n\n        <DeleteModal\n          isOpen={btnState.wantToDelete}\n          num={gridApi ? gridApi.getSelectedRows().length : 0}\n          goDelete={() => { handleGoDelete(); }}\n          cancel={() => { handleCancelDelete(); }}\n        />\n\n        <Form>\n          <Form.Group controlId=\"formBasicEmail\" className=\"mb-5\">\n            <Row>\n              <Col>\n                <Form.Label>Master Password</Form.Label>\n              </Col>\n            </Row>\n            <Row>\n              <Col className=\"d-flex\">\n                <Form.Control type={hideMasterPassword ? 'password' : 'text'} placeholder=\"\" value={masterPassword} onChange={e => setMasterPassword(e.target.value)}/>\n                <Button onClick={toggleMasterPasswordHidden} className={`ml-2${hideMasterPassword ? '' : ' px-3'}`}>\n                  {hideMasterPassword ? 'Show' : 'Hide'}\n                </Button>\n              </Col>\n            </Row>\n          </Form.Group>\n        </Form>\n\n        <div className=\"ag-theme-alpine mb-3\" style={{ height: 400 }}>\n          <AgGridReact\n            rowData={ _.cloneDeep(accs) }\n            onGridReady={({ api }) => setGridApi(api)}\n            defaultColDef={{\n              editable: ({ column, node }) => column.getColDef().suppressMovable && node.isSelected(),\n              resizable: true,\n              filter: true,\n              sortable: true,\n              suppressMovable: btnState.amEditing,\n            }}\n            onRowDataChanged={handleRowDataChanged}\n            singleClickEdit={true}\n            enableCellTextSelection={true}\n            rowSelection=\"multiple\"\n            onNewColumnsLoaded={() => { if (gridApi) { gridApi.refreshCells(); }}}\n            onSelectionChanged={handleSelectionChange}\n            suppressRowClickSelection={true}\n            getRowNodeId={r => r.id}\n            onRowClicked={handleRowClick}\n          >\n            <AgGridColumn field=\"id\" hide />\n            <AgGridColumn field=\"account\" flex={1} headerCheckboxSelection={btnState.showCheckboxes} checkboxSelection={btnState.showCheckboxes}  minWidth={150} />\n            <AgGridColumn field=\"username\" flex={1} minWidth={150} />\n            <AgGridColumn field=\"length\" width={100} />\n            <AgGridColumn field=\"index\" width={100} />\n            <AgGridColumn field=\"notes\" flex={1} minWidth={150} />\n          </AgGridReact>\n        </div>\n          \n        <Row className=\"mb-4\">\n          <Col className=\"d-flex justify-content-start\">\n            {btnState.showAddBtn && <Button className=\"mr-2\" onClick={handleAddNew}>Add New</Button>}\n            {gridApi && btnState.showClearBtn && <Button className=\"mr-2\" onClick={handleClear}>Clear</Button>}\n            {btnState.amEditing && <Button className=\"mr-2\" onClick={handleSaveEdit}>Save</Button>}\n            {btnState.showEditBtn && <Button className=\"mr-2\" onClick={handleEdit}>{btnState.amEditing ? \"Cancel\" : \"Edit\"}</Button>}\n            {btnState.showDeleteBtn && <Button onClick={handleDelete}>Delete</Button>}\n          </Col>\n          <Col className=\"d-flex justify-content-end\">\n            <Button variant=\"secondary\" onClick={handleExport}>Export to CSV</Button>\n          </Col>\n        </Row>\n      </div>)}\n    </>\n  )\n}","import { useEffect, useState } from 'react';\nimport { useRecoilValue, useRecoilState } from 'recoil';\nimport { v4 as uuidv4 } from 'uuid';\nimport _ from 'lodash';\n\nimport { addUserListener, updateUserAcc, deleteUserAcc } from '../DB';\nimport { loginState, LOGIN_ENUM, uidState } from '../Login/state';\nimport { masterPasswordState } from './state';\nimport { calcPassword } from '../crypto/encrypt';\nimport { validateField } from './components/AddModal/validateField';\n\nexport const useList = () => {\n  const [masterPassword, setMasterPassword] = useRecoilState(masterPasswordState);\n  const [masterTimeout, setMasterTimeout] = useState(null);\n  const login = useRecoilValue(loginState);\n  const uid = useRecoilValue(uidState);\n  const [hide, setHide] = useState(true);\n  const [accs, setAccs] = useState([]);\n\n  useEffect(() => {\n    if (login === LOGIN_ENUM['in']) {\n      setHide(false);\n    } else {\n      setHide(true);\n    }\n  }, [login]);\n\n  useEffect(() => {\n    if (uid) {\n      const cb = s => {\n        const newAccs = s.docs.map(d => (\n          { ...d.data(), id: d.id }\n        ));\n        setAccs(newAccs);\n      };\n      return addUserListener({ uid, cb });\n    }\n  }, [uid]);\n\n  useEffect(() => {\n    if (masterPassword.length > 0) {\n      clearTimeout(masterTimeout);\n      const newTimeout = setTimeout(() => {\n        setMasterPassword('');\n        console.log(\"password cleared\");\n      }, 300000); // 5 minutes\n      setMasterTimeout(newTimeout);\n    }\n  }, [masterPassword]);\n\n  const addNewAcc = (data) => {\n    const uuid = uuidv4()\n    updateUserAcc({ uid, accId: uuid, data });\n    return uuid;\n  }\n\n  const updateAccs = ({ next }) => {\n    next.forEach(({ id, ...rest }) => {\n      const toCheck = [\n        { field: \"account\", value: rest.account },\n        { field: \"username\", value: rest.username },\n        { field: \"length\", value: rest.length },\n        { field: \"index\", value: rest.index },\n        { field: \"notes\", value: rest.notes }\n      ];\n\n      const validData = toCheck.reduce((output, val) => {\n        if (output === null) {\n          return null;\n        }\n\n        const { valid, coerced } = validateField(val);\n\n        if (!valid) {\n          if (!coerced) {\n            return null;\n          }\n          return { ...output, [val.field]: coerced };\n        }\n\n        return { ...output, [val.field]: val.value };\n      }, {});\n\n      updateUserAcc({ uid, accId: id, data: validData });\n    });\n  }\n\n  const deleteAccs = (data) => {\n    data.forEach(accId => deleteUserAcc({ uid, accId }));\n  }\n\n  const genPassword = async (profile) => {\n    if (masterPassword.length > 0) {\n      const password = await calcPassword({ profile, masterPassword });\n      return password;\n    } else {\n      return '';\n    } \n  }\n\n  return {\n    hide,\n    masterPassword,\n    setMasterPassword,\n    accs,\n    addNewAcc,\n    updateAccs,\n    deleteAccs,\n    genPassword\n  };\n}","import { RecoilRoot } from 'recoil';\n\nimport { connect } from './components/DB';\nimport { Login } from './components/Login';\nimport { List } from './components/List';\n\nimport './App.scss';\n\nfunction App() {\n  connect();\n\n  return (\n    <RecoilRoot>\n      <div className=\"container my-5\">\n        <List />\n        <Login />\n      </div>\n    </RecoilRoot>\n  );\n}\n\nexport default App;\n\n/*\n<!-- The core Firebase JS SDK is always required and must be listed first -->\n<script src=\"https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js\"></script>\n\n<!-- TODO: Add SDKs for Firebase products that you want to use\n     https://firebase.google.com/docs/web/setup#available-libraries -->\n<script src=\"https://www.gstatic.com/firebasejs/8.4.1/firebase-analytics.js\"></script>\n\n<script>\n  // Your web app's Firebase configuration\n  // For Firebase JS SDK v7.20.0 and later, measurementId is optional\n  var firebaseConfig = {\n    apiKey: \"AIzaSyBSR0d-BPHVVGdlCJcjaDNZhFSt9CH_7vU\",\n    authDomain: \"lesser-pass.firebaseapp.com\",\n    projectId: \"lesser-pass\",\n    storageBucket: \"lesser-pass.appspot.com\",\n    messagingSenderId: \"386351610572\",\n    appId: \"1:386351610572:web:0a5032f9797b7f4f452069\",\n    measurementId: \"G-C7WK4HJ5EJ\"\n  };\n  // Initialize Firebase\n  firebase.initializeApp(firebaseConfig);\n  firebase.analytics();\n</script>\n*/\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}