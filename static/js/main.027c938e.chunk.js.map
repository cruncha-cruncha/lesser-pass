{"version":3,"sources":["components/DB/connect.js","components/DB/addUserListener.js","components/DB/createUserProfile.js","components/DB/updateUserAcc.js","components/DB/deleteUserAcc.js","components/Login/state/atoms.js","components/Login/index.js","components/Login/useLogin.js","components/List/state/atoms.js","components/crypto/BaseN.js","components/crypto/encrypt.js","components/List/components/AddModal/index.js","components/List/components/DeleteModal/index.js","components/List/index.js","components/List/useList.js","App.js","reportWebVitals.js","index.js"],"names":["firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","connect","a","firebase","apps","length","initializeApp","addUserListener","uid","cb","db","firestore","collection","doc","onSnapshot","s","e","createUserProfile","get","then","snapshot","exists","set","updateUserAcc","accId","data","deleteUserAcc","delete","LOGIN_ENUM","loginState","atom","key","default","uidState","Login","useRecoilState","login","setLogin","setUid","useEffect","useLogin","auth","onAuthStateChanged","user","Row","Col","className","Button","onClick","useDeviceLanguage","provider","GoogleAuthProvider","signInWithRedirect","disabled","signOut","masterPasswordState","BaseN","alphabet","blockMaxBitsCount","Object","freeze","encodeBytes","getOptimalBitsCount","charsCount","maxBitsCount","radix","blockBitsCount","bitsCount","blockCharsCount","charsCountInBits","mainBitsLength","Math","floor","tailBitsLength","mainCharsCount","tailCharsCount","iterCount","result","i","bits","getBitsN","bitPos","bitsToChars","chars","ind","count","block","bigCharsCount","BigInt","join","localBlock","_","cloneDeep","remainder","curBytePos","curBitInBytePos","shift","xLength","min","x2Length","n1","logBaseN","charsCountLog","log","maxRatio","n","l1","ceil","ratio","x","r","calcPassword","profile","masterPassword","account","username","index","salt","toString","pbkdf2er","password","iterations","digest","substring","window","crypto","subtle","importKey","stringToArrayBuffer","algo","name","hash","deriveKey","derivedKey","exportKey","keyArray","byteArr","bufferToByteArray","string","charList","unescape","encodeURIComponent","split","arrayBuffer","push","charCodeAt","Uint8Array","Array","from","AddModal","isOpen","save","cancel","useState","setAccount","setUsername","setLength","setIndex","notes","setNotes","invalid","setInvalid","newInvalid","Modal","show","animation","onHide","Header","closeButton","Title","Body","Form","Group","Label","Control","type","isInvalid","includes","value","onChange","target","Footer","variant","DeleteModal","num","goDelete","btnStateReducer","state","action","payload","showEditBtn","showDeleteBtn","showClearBtn","showAddBtn","wantToAdd","showCheckboxes","amEditing","wantToDelete","initialBtnState","List","gridApi","setGridApi","hideMasterPassword","setHideMasterPassword","staticSelected","setStaticSelected","useReducer","btnState","dispatchBtn","setMasterPassword","useRecoilValue","hide","setHide","accs","setAccs","newAccs","docs","map","d","id","addNewAcc","uuid","uuidv4","updateAccs","forEach","rest","deleteAccs","genPassword","useList","handleRowClick","navigator","clipboard","writeText","setEnableCellTextSelection","getSelectedRows","accIds","handleGoDelete","controlId","placeholder","style","height","rowData","onGridReady","api","defaultColDef","editable","column","node","getColDef","suppressMovable","isSelected","resizable","filter","sortable","onRowDataChanged","forEachNode","setSelected","singleClickEdit","enableCellTextSelection","rowSelection","onNewColumnsLoaded","refreshCells","onSelectionChanged","suppressRowClickSelection","getRowNodeId","onRowClicked","field","flex","headerCheckboxSelection","checkboxSelection","width","deselectAll","stopEditing","setRowData","exportDataAsCsv","columnKeys","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"wPAYMA,G,kBAAiB,CACrBC,OAAQ,0CACRC,WAAY,8BACZC,UAAW,cACXC,cAAe,0BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAGJC,EAAO,uCAAG,sBAAAC,EAAA,yDAChBC,IAASC,KAAKC,OADE,gCAEbF,IAASG,cAAcb,GAFV,2CAAH,qDClBPc,EAAe,uCAAG,iCAAAL,EAAA,6DAASM,EAAT,EAASA,IAAKC,EAAd,EAAcA,GAAd,SACvBR,IADuB,cAEvBS,EAAKP,IAASQ,YAFS,kBAGtBD,EAAGE,WAAW,QAAQC,IAAIL,GAAKI,WAAW,YAAYE,YAAW,SAAAC,GAAC,OAAIN,EAAGM,MAAI,SAAAC,QAHvD,2CAAH,sDCAfC,EAAiB,uCAAG,+BAAAf,EAAA,6DAASM,EAAT,EAASA,IAAT,SACzBP,IADyB,cAEzBS,EAAKP,IAASQ,YAFW,SAGzBD,EAAGE,WAAW,QAAQC,IAAIL,GAAKU,MAAMC,KAArC,uCAA0C,WAAOC,GAAP,SAAAlB,EAAA,yDACzCkB,EAASC,OADgC,gCAEtCX,EAAGE,WAAW,QAAQC,IAAIL,GAAKc,IAAI,IAFG,2CAA1C,uDAHyB,2CAAH,sDCAjBC,EAAa,uCAAG,mCAAArB,EAAA,6DAASM,EAAT,EAASA,IAAKgB,EAAd,EAAcA,MAAOC,EAArB,EAAqBA,KAArB,SACrBxB,IADqB,cAErBS,EAAKP,IAASQ,YAFO,SAGrBD,EAAGE,WAAW,QAAQC,IAAIL,GAAKI,WAAW,YAAYC,IAAIW,GAAOF,IAAIG,GAHhD,2CAAH,sDCAbC,EAAa,uCAAG,iCAAAxB,EAAA,6DAASM,EAAT,EAASA,IAAKgB,EAAd,EAAcA,MAAd,SACrBvB,IADqB,cAErBS,EAAKP,IAASQ,YAFO,SAGrBD,EAAGE,WAAW,QAAQC,IAAIL,GAAKI,WAAW,YAAYC,IAAIW,GAAOG,SAH5C,2CAAH,sD,wBCFbC,EACA,EADAA,EAEJ,EAFIA,EAGA,EAHAA,EAIL,EAJKA,EAKC,EAGDC,EAAaC,YAAK,CAC7BC,IAAK,QACLC,QAASJ,IAGEK,EAAWH,YAAK,CAC3BC,IAAK,MACLC,QAAS,K,cCNEE,EAAQ,WAAO,IAAD,ECNH,WAAO,IAAD,EACFC,YAAeN,GADb,mBACrBO,EADqB,KACdC,EADc,OAENF,YAAeF,GAFT,mBAEhBK,GAFgB,WAU5B,OANAC,qBAAU,WACJH,IAAUR,GACZU,EAAO,MAER,CAACF,IAEG,CACLA,QACAC,WACAC,UDNkCE,GAA5BJ,EADiB,EACjBA,MAAOC,EADU,EACVA,SAAUC,EADA,EACAA,OA4BzB,OAZAC,qBAAU,WACR,OAAOpC,IAASsC,OAAOC,oBAAmB,SAACC,GACrCA,GACFL,EAAOK,EAAKnC,KACZ6B,EAAST,GACTX,EAAkB,CAAET,IAAKmC,EAAKnC,OAE9B6B,EAAST,QAGZ,IAGD,cAACgB,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,CAAKC,UAAU,6BAAf,UACGV,IAAUR,GACT,4CACAQ,IAAUR,GAAqBQ,IAAUR,IACzC,cAACmB,EAAA,EAAD,CACEC,QAjCU,WAClBX,EAAST,GACTzB,IAASsC,OAAOQ,oBAChB,IAAMC,EAAW,IAAI/C,IAASsC,KAAKU,mBACnChD,IAASsC,OAAOW,mBAAmBF,IA8B3BG,SAAUjB,IAAUR,EAFtB,oBAMAQ,IAAUR,GAAoBQ,IAAUR,IACxC,cAACmB,EAAA,EAAD,CACEC,QAjCW,WACnBX,EAAST,GACTzB,IAASsC,OAAOa,UAAUnC,MAAK,WAC7BkB,EAAST,OA+BHyB,SAAUjB,IAAUR,EAFtB,0B,sEEnDG2B,EAAsBzB,YAAK,CACtCC,IAAK,iBACLC,QAAS,KCAJ,SAASwB,EAAT,GAAkD,IAAhCC,EAA+B,EAA/BA,SAAUC,EAAqB,EAArBA,kBAmDjC,OAAOC,OAAOC,OAAO,CACnBC,YAnDkB,SAACpC,GACnB,IAAKA,GAAwB,IAAhBA,EAAKpB,OAChB,MAAO,GAoBT,IAtB4B,MAQxByD,EAAoB,CACtBC,WAAYN,EAASpD,OACrB2D,aAAcN,EACdO,MAAO,IALIC,EANe,EAM1BC,UACkBC,EAPQ,EAO1BC,iBAOIC,EAAiBC,KAAKC,MAAoB,EAAd/C,EAAKpB,OAAa6D,GAAkBA,EAChEO,EAA+B,EAAdhD,EAAKpB,OAAaiE,EACnCI,EAAiBH,KAAKC,MAAMF,EAAiBF,EAAkBF,GAC/DS,EAAiBJ,KAAKC,OAAOC,EAAiBL,EAAkBF,EAAiB,GAAKA,GACtFU,EAAYL,KAAKC,MAAME,EAAiBN,GAExCS,EAAS,GAENC,EAAI,EAAGA,EAAIF,EAAWE,IAAK,CAClC,IACMC,EAAOC,EAAS,CAAEvD,OAAMwD,OADfH,EAAIZ,EACmBC,UAAWD,IACjDgB,EAAY,CACVC,MAAON,EACPO,IAAKN,EAAIV,EACTiB,MAAOjB,EACPkB,MAAOP,EACPQ,cAAeC,OAAO/B,EAASpD,QAC/BoD,aAIJ,GAAsB,GAAlBgB,EAAqB,CACvB,IAAMM,EAAOC,EAAS,CAAEvD,OAAMwD,OAAQX,EAAgBH,UAAWM,IACjES,EAAY,CACVC,MAAON,EACPO,IAAKV,EACLW,MAAOV,EACPW,MAAOP,EACPQ,cAAeC,OAAO/B,EAASpD,QAC/BoD,aAIJ,OAAOoB,EAAOY,KAAK,OAQvB,IAAMP,EAAc,SAAC,GAEnB,IAF8E,IAAzDC,EAAwD,EAAxDA,MAAOC,EAAiD,EAAjDA,IAAKC,EAA4C,EAA5CA,MAAOC,EAAqC,EAArCA,MAAOC,EAA8B,EAA9BA,cAAe9B,EAAe,EAAfA,SAC1DiC,EAAaC,IAAEC,UAAUN,GACpBR,EAAI,EAAGA,EAAIO,EAAOP,IAAK,CAC9B,IAAMe,EAAYH,EAAaH,EAC/BJ,EAAMC,EAAMN,GAAKrB,EAASoC,GAC1BH,GAA0BH,IAIxBP,EAAW,SAAC,GAAiC,IAA/BvD,EAA8B,EAA9BA,KAAMwD,EAAwB,EAAxBA,OAAQd,EAAgB,EAAhBA,UAC5BU,EAASW,OAAO,GAEhBM,EAAavB,KAAKC,MAAMS,EAAS,GACjCc,EAAkBd,EAAS,EACzBe,EAAQ,EAAID,EACdE,EAAU1B,KAAK2B,IAAI/B,EAAW6B,GAElC,GAAe,GAAXC,EAAc,CAChBpB,EAASW,OAAQ/D,EAAKqE,IAAeE,EAAQC,GAAa,GAAKD,GAAS,IAAOR,OAAOrB,EAAY8B,GAElGH,GAAcvB,KAAKC,OAAOuB,EAAkBE,GAAW,GACvDF,GAAmBA,EAAkBE,GAAW,EAEhD,IAAIE,EAAWhC,EAAY8B,EAK3B,IAJIE,EAAW,IACbA,EAAW,GAGNA,EAAW,GAChBF,GAAWE,EACXtB,GAAUW,OAAO/D,EAAKqE,IAAe,EAAIK,IAAaX,OAAOrB,EAAY8B,GAEzEH,GAAcvB,KAAKC,OAAOuB,EAAkBI,GAAY,GACxDJ,GAAmBA,EAAkBI,GAAY,GAEjDA,EAAWhC,EAAY8B,GACR,IACbE,EAAW,GAKjB,OAAOtB,GAGHf,EAAsB,SAAC,GAO3B,IAPoE,IAAvCC,EAAsC,EAAtCA,WAAYC,EAA0B,EAA1BA,aAAcC,EAAY,EAAZA,MACnDE,EAAY,EACZE,EAAmB,EACjB+B,EAAKC,EAAStC,EAAYE,GAC1BqC,EAAgB/B,KAAKgC,IAAItC,GAASM,KAAKgC,IAAIxC,GAC7CyC,EAAW,EAENC,EAAIL,EAAIK,GAAKzC,EAAcyC,IAAK,CACvC,IAAIC,EAAKnC,KAAKoC,KAAKF,EAAIH,GACnBM,EAAQH,EAAIC,EACZE,EAAQJ,IACVA,EAAWI,EACXzC,EAAYsC,EACZpC,EAAmBqC,GAIvB,MAAO,CAAEvC,YAAWE,qBAIhBgC,EAAW,SAACQ,EAAGJ,GAEnB,IADA,IAAIK,EAAI,EAC2B,KAA3BD,EAAItC,KAAKC,MAAMqC,EAAIJ,KACzBK,IAEF,OAAOA,GC/HIC,EAAY,uCAAG,2CAAA7G,EAAA,6DAAS8G,EAAT,EAASA,QAASC,EAAlB,EAAkBA,eACpCC,EAAqCF,EAArCE,QAASC,EAA4BH,EAA5BG,SAAUC,EAAkBJ,EAAlBI,MAAO/G,EAAW2G,EAAX3G,OAC5BgH,EAAOH,EAAUC,EAAWC,EAAME,SAAS,IAFvB,SAGHC,EAAS,CAAEC,SAAUP,EAAgBI,OAAMI,WAAY,IAAQC,OAAQ,YAHpE,cAGpBF,EAHoB,yBAInBA,EAASG,UAAU,EAAGtH,IAJH,2CAAH,sDAUzB,SAASkH,EAAT,GAA2D,IAAvCC,EAAsC,EAAtCA,SAAUH,EAA4B,EAA5BA,KAAMI,EAAsB,EAAtBA,WAAYC,EAAU,EAAVA,OAC9C,OAAOE,OAAOC,OAAOC,OAClBC,UACC,MACAC,EAAoBR,GACpB,UACA,EACA,CAAC,cACDrG,MAAK,SAACY,GACN,IAAMkG,EAAO,CACXC,KAAM,SACNb,KAAMW,EAAoBX,GAC1BI,aACAU,KAAMT,GAER,OAAOE,OAAOC,OAAOC,OAAOM,UAC1BH,EACAlG,EACA,CACEmG,KAAM,UACN7H,OAAQ,MAEV,EACA,CAAC,UAAW,eAEbc,MAAK,SAACkH,GAAD,OACNT,OAAOC,OAAOC,OAAOQ,UAAU,MAAOD,GAAYlH,MAAK,SAACoH,GACtD,IAAMC,EAAUC,EAAkBF,GAOlC,OALkB,IAAI/E,EAAM,CAC1BC,SAhCR,iGAiCQC,kBAAmB,KAClBG,YAAY2E,SAOvB,SAASR,EAAoBU,GAI3B,IAHA,IACMC,EADeC,SAASC,mBAAmBH,IACnBI,MAAM,IAC9BC,EAAc,GACXjE,EAAI,EAAGA,EAAI6D,EAAStI,OAAQyE,GAAK,EACxCiE,EAAYC,KAAKL,EAAS7D,GAAGmE,WAAW,IAE1C,OAAO,IAAIC,WAAWH,GAGxB,IAAMN,EAAoB,SAACF,GAAD,OAAcY,MAAMC,KAAK,IAAIF,WAAWX,K,QC1DrDc,EAAW,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,OAAQC,EAAmB,EAAnBA,KAAMC,EAAa,EAAbA,OAAa,EACtBC,mBAAS,IADa,mBAC7CvC,EAD6C,KACpCwC,EADoC,OAEpBD,mBAAS,IAFW,mBAE7CtC,EAF6C,KAEnCwC,EAFmC,OAGxBF,mBAAS,IAHe,mBAG7CpJ,EAH6C,KAGrCuJ,EAHqC,OAI1BH,mBAAS,GAJiB,mBAI7CrC,EAJ6C,KAItCyC,EAJsC,OAK1BJ,mBAAS,IALiB,mBAK7CK,EAL6C,KAKtCC,EALsC,OAMtBN,mBAAS,IANa,mBAM7CO,EAN6C,KAMpCC,EANoC,KAQpD1H,qBAAU,WACR,IAAM2H,EAAa,GACH,KAAZhD,GACFgD,EAAWlB,KAAK,WAED,KAAb7B,GACF+C,EAAWlB,KAAK,aAEd3I,EAAS,IAAMA,EAAS,KAC1B6J,EAAWlB,KAAK,UAEd5B,EAAQ,GACV8C,EAAWlB,KAAK,SAElBiB,EAAWC,KACV,CAAChD,EAASC,EAAU9G,EAAQ+G,IAE/B7E,qBAAU,WACRmH,EAAW,IACXC,EAAY,IACZC,EAAU,IACVC,EAAS,GACTE,EAAS,MACR,CAACT,IAMJ,OACE,eAACa,EAAA,EAAD,CAAOC,KAAMd,EAAQe,WAAW,EAAOC,OAAQd,EAA/C,UACE,cAACW,EAAA,EAAMI,OAAP,CAAcC,aAAW,EAAzB,SACE,cAACL,EAAA,EAAMM,MAAP,4BAGF,cAACN,EAAA,EAAMO,KAAP,UACE,eAACC,EAAA,EAAD,WACE,eAACA,EAAA,EAAKC,MAAN,WACE,cAACD,EAAA,EAAKE,MAAN,sBACA,cAACF,EAAA,EAAKG,QAAN,CAAcC,KAAK,OAAOC,UAAWhB,EAAQiB,SAAS,WAAYC,MAAOhE,EAASiE,SAAU,SAAAnK,GAAC,OAAI0I,EAAW1I,EAAEoK,OAAOF,aAEvH,eAACP,EAAA,EAAKC,MAAN,WACE,cAACD,EAAA,EAAKE,MAAN,uBACA,cAACF,EAAA,EAAKG,QAAN,CAAcC,KAAK,OAAOC,UAAWhB,EAAQiB,SAAS,YAAaC,MAAO/D,EAAUgE,SAAU,SAAAnK,GAAC,OAAI2I,EAAY3I,EAAEoK,OAAOF,aAE1H,eAACP,EAAA,EAAKC,MAAN,WACE,cAACD,EAAA,EAAKE,MAAN,qBACA,cAACF,EAAA,EAAKG,QAAN,CAAcC,KAAK,SAASC,UAAWhB,EAAQiB,SAAS,UAAWC,MAAO7K,EAAQ8K,SAAU,SAAAnK,GAAC,OAAI4I,EAAU5I,EAAEoK,OAAOF,aAEtH,eAACP,EAAA,EAAKC,MAAN,WACE,cAACD,EAAA,EAAKE,MAAN,oBACA,cAACF,EAAA,EAAKG,QAAN,CAAcC,KAAK,SAASC,UAAWhB,EAAQiB,SAAS,SAAUC,MAAO9D,EAAO+D,SAAU,SAAAnK,GAAC,OAAI6I,EAAS7I,EAAEoK,OAAOF,aAEnH,eAACP,EAAA,EAAKC,MAAN,WACE,cAACD,EAAA,EAAKE,MAAN,oBACA,cAACF,EAAA,EAAKG,QAAN,CAAcC,KAAK,OAAOC,UAAWhB,EAAQiB,SAAS,SAAUC,MAAOpB,EAAOqB,SAAU,SAAAnK,GAAC,OAAI+I,EAAS/I,EAAEoK,OAAOF,kBAKrH,eAACf,EAAA,EAAMkB,OAAP,WACE,cAACtI,EAAA,EAAD,CAAQuI,QAAQ,YAAYtI,QAASwG,EAArC,oBACA,cAACzG,EAAA,EAAD,CAAQuI,QAAQ,UAAUjI,SAA6B,IAAnB2G,EAAQ3J,OAAc2C,QArC7C,WACjBuG,EAAK,CAAErC,UAASC,WAAU9G,SAAQ+G,QAAO0C,WAoCrC,wBCvEKyB,EAAc,SAAC,GAAuC,IAArCjC,EAAoC,EAApCA,OAAQkC,EAA4B,EAA5BA,IAAKC,EAAuB,EAAvBA,SAAUjC,EAAa,EAAbA,OACnD,OACE,eAACW,EAAA,EAAD,CAAOC,KAAMd,EAAQe,WAAW,EAAOC,OAAQd,EAA/C,UACE,cAACW,EAAA,EAAMI,OAAP,CAAcC,aAAW,EAAzB,SACE,cAACL,EAAA,EAAMM,MAAP,4BAGF,cAACN,EAAA,EAAMO,KAAP,UACE,2CAAcc,EAAd,WAAmC,IAARA,EAAY,GAAK,IAA5C,yCAGF,eAACrB,EAAA,EAAMkB,OAAP,WACE,cAACtI,EAAA,EAAD,CAAQuI,QAAQ,YAAYtI,QAASwG,EAArC,oBACA,cAACzG,EAAA,EAAD,CAAQuI,QAAQ,SAAStI,QAASyI,EAAlC,2BCLFC,EAAkB,SAACC,EAAOC,GAC9B,IAAMC,EAAUD,EAAOC,QACvB,OAAQD,EAAOb,MACb,IAAK,SACH,OAAuB,IAAnBc,EAAQxL,OACH,2BAAKsL,GAAZ,IAAmBG,aAAa,EAAOC,eAAe,EAAOC,cAAc,EAAOC,YAAY,IAEvF,2BAAKN,GAAZ,IAAmBG,aAAa,EAAMC,eAAe,EAAMC,cAAc,EAAMC,YAAY,IAE/F,IAAK,MACH,OAAO,2BAAKN,GAAZ,IAAmBO,UAAWL,IAChC,IAAK,OACH,MAAgB,UAAZA,EACK,2BAAKF,GAAZ,IAAmBQ,gBAAgB,EAAOC,WAAW,EAAMN,aAAa,EAAMC,eAAe,EAAOC,cAAc,EAAOC,YAAY,IAE9H,2BAAKN,GAAZ,IAAmBQ,gBAAgB,EAAMC,WAAW,EAAON,aAAa,EAAMC,eAAe,EAAMC,cAAc,EAAMC,YAAY,IAEvI,IAAK,SACH,MAAgB,SAAZJ,EACK,2BAAKF,GAAZ,IAAmBU,cAAc,IACZ,IAAZR,EACF,2BAAKF,GAAZ,IAAmBU,cAAc,IAE1B,2BAAKV,GAAZ,IAAmBU,cAAc,EAAOP,aAAa,EAAOC,eAAe,EAAOC,cAAc,EAAOC,YAAY,IAEvH,IAAK,QACH,OAAO,2BAAKN,GAAZ,IAAmBG,aAAa,EAAOC,eAAe,EAAOC,cAAc,EAAOC,YAAY,IAChG,QACE,OAAON,IAIPW,EAAkB,CACtBR,aAAa,EACbM,WAAW,EACXL,eAAe,EACfM,cAAc,EACdL,cAAc,EACdC,YAAY,EACZC,WAAW,EACXC,gBAAgB,GAGLI,EAAO,WAAO,IAAD,EACM9C,mBAAS,MADf,mBACjB+C,EADiB,KACRC,EADQ,OAE4BhD,oBAAS,GAFrC,mBAEjBiD,EAFiB,KAEGC,EAFH,OAGoBlD,mBAAS,IAH7B,mBAGjBmD,EAHiB,KAGDC,EAHC,OAIQC,qBAAWpB,EAAiBY,GAJpC,mBAIjBS,EAJiB,KAIPC,EAJO,OC7CH,WAAO,IAAD,EACiB7K,YAAeoB,GADhC,mBACpB0D,EADoB,KACJgG,EADI,KAErB7K,EAAQ8K,YAAerL,GACvBrB,EAAM0M,YAAejL,GAHA,EAIHwH,oBAAS,GAJN,mBAIpB0D,EAJoB,KAIdC,EAJc,OAKH3D,mBAAS,IALN,mBAKpB4D,EALoB,KAKdC,EALc,KA8C3B,OAvCA/K,qBAAU,WAEN6K,EADEhL,IAAUR,KAKb,CAACQ,IAEJG,qBAAU,WACR,GAAI/B,EAOF,OAAOD,EAAgB,CAAEC,MAAKC,GANnB,SAAAM,GACT,IAAMwM,EAAUxM,EAAEyM,KAAKC,KAAI,SAAAC,GAAC,kCACrBA,EAAEjM,QADmB,IACXkM,GAAID,EAAEC,QAEvBL,EAAQC,QAIX,CAAC/M,IAqBG,CACL2M,OACAF,oBACAI,OACAO,UAvBgB,SAACnM,GACjB,IAAMoM,EAAOC,cAEb,OADAvM,EAAc,CAAEf,MAAKgB,MAAOqM,EAAMpM,SAC3BoM,GAqBPE,WAlBiB,SAACtM,GAClBA,EAAKuM,SAAQ,gBAAGL,EAAH,EAAGA,GAAOM,EAAV,6BAAqB1M,EAAc,CAAEf,MAAKgB,MAAOmM,EAAIlM,KAAMwM,QAkBxEC,WAfiB,SAACzM,GAClBA,EAAKuM,SAAQ,SAAAxM,GAAK,OAAIE,EAAc,CAAElB,MAAKgB,cAe3C2M,YAZe,uCAAG,WAAOnH,GAAP,eAAA9G,EAAA,sEACK6G,EAAa,CAAEC,UAASC,mBAD7B,cACZO,EADY,yBAEXA,GAFW,2CAAH,uDDkBb4G,GAPFjB,EAPsB,EAOtBA,KACAF,EARsB,EAQtBA,kBACAI,EATsB,EAStBA,KACAO,EAVsB,EAUtBA,UACAG,EAXsB,EAWtBA,WACAG,EAZsB,EAYtBA,WACAC,EAbsB,EAatBA,YAyEIE,EAAc,uCAAG,6BAAAnO,EAAA,yDAASuB,EAAT,EAASA,KACzBsL,EAASX,UADO,4BAEnBkC,UAAUC,UAFS,SAEiBJ,EAAY1M,GAF7B,wBAEC+M,UAFD,2DAAH,sDAgBpB,OAVAjM,qBAAU,WACJiK,IACEO,EAASX,UACXI,EAAQiC,4BAA2B,GAEnCjC,EAAQiC,4BAA2B,MAGtC,CAAC1B,EAASX,YAGX,oCACIe,GACF,gCACE,cAAC,EAAD,CACE7D,OAAQyD,EAASb,UACjB3C,KAAM,SAAC9H,GAAWmM,EAAUnM,GAAOuL,EAAY,CAAEjC,KAAM,MAAOc,SAAS,KACvErC,OAAQ,kBAAMwD,EAAY,CAAEjC,KAAM,MAAOc,SAAS,OAGpD,cAAC,EAAD,CACEvC,OAAQyD,EAASV,aACjBb,IAAKgB,EAAUA,EAAQkC,kBAAkBrO,OAAS,EAClDoL,SAAU,YA1DK,WACrBoB,EAAkB,IAClB,IAAM8B,EAASnC,EAAQkC,kBAAkBjB,KAAI,SAAA3G,GAAC,OAAIA,EAAE6G,MACpDX,EAAY,CAAEjC,KAAM,SAAUc,QAAS8C,EAAOtO,SAC9C6N,EAAWS,GAsDaC,IAClBpF,OAAQ,WAnDdwD,EAAY,CAAEjC,KAAM,SAAUc,QAAS,OAsDnC,cAAClB,EAAA,EAAD,UACE,eAACA,EAAA,EAAKC,MAAN,CAAYiE,UAAU,iBAAiB/L,UAAU,OAAjD,UACE,cAACF,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,UACE,cAAC8H,EAAA,EAAKE,MAAN,kCAGJ,cAACjI,EAAA,EAAD,UACE,eAACC,EAAA,EAAD,CAAKC,UAAU,SAAf,UACE,cAAC6H,EAAA,EAAKG,QAAN,CAAcC,KAAM2B,EAAqB,WAAa,OAAQoC,YAAY,GAAG3D,SAAU,SAAAnK,GAAC,OAAIiM,EAAkBjM,EAAEoK,OAAOF,UACvH,cAACnI,EAAA,EAAD,CAAQC,QAjHa,WACjC2J,GAAuBD,IAgHkC5J,UAAS,cAAS4J,EAAqB,GAAK,SAAzF,SACGA,EAAqB,SAAW,mBAO3C,qBAAK5J,UAAU,uBAAuBiM,MAAO,CAAEC,OAAQ,KAAvD,SACE,eAAC,cAAD,CACEC,QAAUtJ,IAAEC,UAAUyH,GACtB6B,YAAa,gBAAGC,EAAH,EAAGA,IAAH,OAAa1C,EAAW0C,IACrCC,cAAe,CACbC,SAAU,gBAAGC,EAAH,EAAGA,OAAQC,EAAX,EAAWA,KAAX,OAAsBD,EAAOE,YAAYC,iBAAmBF,EAAKG,cAC3EC,WAAW,EACXC,QAAQ,EACRC,UAAU,EACVJ,gBAAiB1C,EAASX,WAE5B0D,iBAhFmB,WACvBtD,GACuC,IAArCA,EAAQkC,kBAAkBrO,QAAgBuM,EAAevM,OAAS,GACpEmM,EAAQuD,aAAY,SAAAtJ,GAChBA,EAAEuJ,YAAYpD,EAAe3B,SAASxE,EAAEkH,SA6ExCsC,iBAAiB,EACjBC,yBAAyB,EACzBC,aAAa,WACbC,mBAAoB,WAAY5D,GAAWA,EAAQ6D,gBACnDC,mBA7HoB,WAC5BtD,EAAY,CAAEjC,KAAM,SAAUc,QAASW,EAAQkC,qBA6HvC6B,2BAA2B,EAC3BC,aAAc,SAAA1J,GAAC,OAAIA,EAAE6G,IACrB8C,aAAcpC,EAlBhB,UAoBE,cAAC,eAAD,CAAcqC,MAAM,KAAKvD,MAAI,IAC7B,cAAC,eAAD,CAAcuD,MAAM,UAAUC,KAAM,EAAGC,wBAAyB7D,EAASZ,eAAgB0E,kBAAmB9D,EAASZ,iBACrH,cAAC,eAAD,CAAcuE,MAAM,WAAWC,KAAM,IACrC,cAAC,eAAD,CAAcD,MAAM,SAASI,MAAO,MACpC,cAAC,eAAD,CAAcJ,MAAM,QAAQI,MAAO,MACnC,cAAC,eAAD,CAAcJ,MAAM,QAAQC,KAAM,SAItC,eAAC/N,EAAA,EAAD,CAAKE,UAAU,OAAf,UACE,eAACD,EAAA,EAAD,CAAKC,UAAU,+BAAf,UACGiK,EAASd,YAAc,cAAClJ,EAAA,EAAD,CAAQD,UAAU,OAAOE,QAzItC,WACnBgK,EAAY,CAAEjC,KAAM,MAAOc,SAAS,KAwIJ,qBACvBW,GAAWO,EAASf,cAAgB,cAACjJ,EAAA,EAAD,CAAQD,UAAU,OAAOE,QAtJpD,WAClB6J,EAAkB,IAClBG,EAAY,CAAEjC,KAAM,UAChByB,GACFA,EAAQuE,eAkJmC,mBACpChE,EAASX,WAAa,cAACrJ,EAAA,EAAD,CAAQD,UAAU,OAAOE,QA7HnC,WACrBgK,EAAY,CAAEjC,KAAM,OAAQc,QAAS,SACrCW,EAAQwE,cACRjD,EAAWvB,EAAQkC,oBA0HY,kBACtB3B,EAASjB,aAAe,cAAC/I,EAAA,EAAD,CAAQD,UAAU,OAAOE,QAxIzC,WACb+J,EAASX,WACXI,EAAQyE,WAAW5D,GACnBL,EAAY,CAAEjC,KAAM,OAAQc,QAAS,aAErCgB,EAAkBL,EAAQkC,kBAAkBjB,KAAI,SAAA3G,GAAC,OAAIA,EAAE6G,OACvDX,EAAY,CAAEjC,KAAM,OAAQc,QAAS,YAkIN,SAA+CkB,EAASX,UAAY,SAAW,SACvGW,EAAShB,eAAiB,cAAChJ,EAAA,EAAD,CAAQC,QAzHxB,WACnB6J,EAAkBL,EAAQkC,kBAAkBjB,KAAI,SAAA3G,GAAC,OAAIA,EAAE6G,OACvDX,EAAY,CAAEjC,KAAM,SAAUc,QAAS,UAuHJ,uBAE7B,cAAChJ,EAAA,EAAD,CAAKC,UAAU,6BAAf,SACE,cAACC,EAAA,EAAD,CAAQC,QAlGG,WACfwJ,GACFA,EAAQ0E,gBAAgB,CACtBC,WAAY,CAAC,UAAW,WAAY,SAAU,QAAS,YA+FnD,sC,MElNGC,OAbf,WAGE,OAFAnR,IAGE,cAAC,IAAD,UACE,sBAAK6C,UAAU,iBAAf,UACE,cAAC,EAAD,IACA,cAAC,EAAD,UCHOuO,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,6BAAqBpQ,MAAK,YAAkD,IAA/CqQ,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCDdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEFC,SAASC,eAAe,SAM1BZ,O","file":"static/js/main.027c938e.chunk.js","sourcesContent":["// Firebase App (the core Firebase SDK) is always required and must be listed first\nimport firebase from \"firebase/app\";\n// If you are using v7 or any earlier version of the JS SDK, you should import firebase using namespace import\n// import * as firebase from \"firebase/app\"\n\n// If you enabled Analytics in your project, add the Firebase SDK for Analytics\nimport \"firebase/analytics\";\n\n// Add the Firebase products that you want to use\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBSR0d-BPHVVGdlCJcjaDNZhFSt9CH_7vU\",\n  authDomain: \"lesser-pass.firebaseapp.com\",\n  projectId: \"lesser-pass\",\n  storageBucket: \"lesser-pass.appspot.com\",\n  messagingSenderId: \"386351610572\",\n  appId: \"1:386351610572:web:0a5032f9797b7f4f452069\",\n  measurementId: \"G-C7WK4HJ5EJ\"\n};\n\nexport const connect = async () => {\n  if (!firebase.apps.length) {\n    await firebase.initializeApp(firebaseConfig);\n  }\n}","import firebase from \"firebase/app\";\n\nimport { connect } from './connect';\n\nexport const addUserListener = async ({ uid, cb }) => {\n  await connect();\n  const db = firebase.firestore();\n  return db.collection('data').doc(uid).collection('accounts').onSnapshot(s => cb(s), e => {});\n}","import firebase from \"firebase/app\";\n\nimport { connect } from './connect';\n\nexport const createUserProfile = async ({ uid }) => {\n  await connect();\n  const db = firebase.firestore();\n  await db.collection('data').doc(uid).get().then(async (snapshot) => {\n    if (!snapshot.exists) {\n      await db.collection('data').doc(uid).set({});\n    }\n  });\n}","import firebase from \"firebase/app\";\n\nimport { connect } from './connect';\n\nexport const updateUserAcc = async ({ uid, accId, data }) => {\n  await connect();\n  const db = firebase.firestore();\n  await db.collection('data').doc(uid).collection('accounts').doc(accId).set(data);\n}","import firebase from \"firebase/app\";\n\nimport { connect } from './connect';\n\nexport const deleteUserAcc = async ({ uid, accId }) => {\n  await connect();\n  const db = firebase.firestore();\n  await db.collection('data').doc(uid).collection('accounts').doc(accId).delete();\n}","import { atom } from 'recoil';\n\nexport const LOGIN_ENUM = {\n  'unknown': 0,\n  'out': 1,\n  'temptIn': 2,\n  'in': 3,\n  'temptOut': 4\n};\n\nexport const loginState = atom({\n  key: 'login',\n  default: LOGIN_ENUM['unknown']\n});\n\nexport const uidState = atom({\n  key: 'uid',\n  default: ''\n});","import React, { useEffect } from 'react';\nimport { Button, Row, Col } from 'react-bootstrap';\nimport firebase from \"firebase/app\";\n\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nimport { createUserProfile } from '../DB';\nimport { LOGIN_ENUM } from './state';\nimport { useLogin } from './useLogin';\n\nexport const Login = () => {\n  const { login, setLogin, setUid } = useLogin();\n\n  const handleLogin = () => {\n    setLogin(LOGIN_ENUM['temptIn']);\n    firebase.auth().useDeviceLanguage();\n    const provider = new firebase.auth.GoogleAuthProvider();\n    firebase.auth().signInWithRedirect(provider);\n  }\n\n  const handleLogout = () => {\n    setLogin(LOGIN_ENUM['temptOut']);\n    firebase.auth().signOut().then(() => {\n      setLogin(LOGIN_ENUM['out']);\n    });\n  }\n\n  useEffect(() => {\n    return firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        setUid(user.uid);\n        setLogin(LOGIN_ENUM[\"in\"]);\n        createUserProfile({ uid: user.uid });\n      } else {\n        setLogin(LOGIN_ENUM['out']);\n      }\n    });\n  }, []);\n\n  return (\n    <Row>\n      <Col className=\"d-flex justify-content-end\">\n        {login === LOGIN_ENUM['unknown'] &&\n          <span>loading</span>}\n        {(login === LOGIN_ENUM['out'] || login === LOGIN_ENUM['temptIn']) && \n          <Button\n            onClick={handleLogin}\n            disabled={login !== LOGIN_ENUM['out']}\n          >\n            Login\n          </Button>}\n        {(login === LOGIN_ENUM['in'] || login === LOGIN_ENUM['temptOut']) &&\n          <Button\n            onClick={handleLogout}\n            disabled={login !== LOGIN_ENUM['in']}\n          >\n            Logout\n          </Button>}\n      </Col>\n    </Row>\n  )\n}","import { useEffect } from 'react';\nimport { useRecoilState } from 'recoil';\n\nimport { loginState, uidState, LOGIN_ENUM } from './state';\n\nexport const useLogin = () => {\n  const [login, setLogin] = useRecoilState(loginState);\n  const [uid, setUid] = useRecoilState(uidState);\n\n  useEffect(() => {\n    if (login === LOGIN_ENUM['out']) {\n      setUid('');\n    }\n  }, [login]);\n\n  return {\n    login,\n    setLogin,\n    setUid\n  };\n}","import { atom } from 'recoil';\n\nexport const masterPasswordState = atom({\n  key: 'masterPassword',\n  default: ''\n});","import _ from 'lodash';\n\n// adapted from https://github.com/KvanTTT/BaseNcoding/blob/master/res/BaseN.js\n\nexport function BaseN ({ alphabet, blockMaxBitsCount }) {\n  const encodeBytes = (data) => {\n    if (!data || data.length === 0) {\n      return \"\";\n    }\n  \n    let {\n      bitsCount: blockBitsCount,\n      charsCountInBits: blockCharsCount\n    } = getOptimalBitsCount({\n      charsCount: alphabet.length,\n      maxBitsCount: blockMaxBitsCount,\n      radix: 2\n    });\n  \n    const mainBitsLength = Math.floor(data.length * 8 / blockBitsCount) * blockBitsCount;\n    const tailBitsLength = data.length * 8 - mainBitsLength;\n    const mainCharsCount = Math.floor(mainBitsLength * blockCharsCount / blockBitsCount);\n    const tailCharsCount = Math.floor((tailBitsLength * blockCharsCount + blockBitsCount - 1) / blockBitsCount);\n    const iterCount = Math.floor(mainCharsCount / blockCharsCount);\n  \n    const result = [];\n  \n    for (let i = 0; i < iterCount; i++) {\n      const bitPos = i * blockBitsCount;\n      const bits = getBitsN({ data, bitPos, bitsCount: blockBitsCount});\n      bitsToChars({\n        chars: result,\n        ind: i * blockCharsCount,\n        count: blockCharsCount,\n        block: bits,\n        bigCharsCount: BigInt(alphabet.length), \n        alphabet\n      });\n    }\n  \n    if (tailBitsLength != 0) {\n      const bits = getBitsN({ data, bitPos: mainBitsLength, bitsCount: tailBitsLength });\n      bitsToChars({\n        chars: result,\n        ind: mainCharsCount,\n        count: tailCharsCount,\n        block: bits,\n        bigCharsCount: BigInt(alphabet.length),\n        alphabet\n      });\n    }\n  \n    return result.join(\"\");\n  }\n\n  return Object.freeze({\n    encodeBytes\n  });\n}\n\nconst bitsToChars = ({ chars, ind, count, block, bigCharsCount, alphabet }) => {\n  let localBlock = _.cloneDeep(block);\n  for (let i = 0; i < count; i++) {\n    const remainder = localBlock % bigCharsCount;\n    chars[ind + i] = alphabet[remainder];\n    localBlock = localBlock / bigCharsCount;\n  }\n}\n\nconst getBitsN = ({ data, bitPos, bitsCount }) => {\n  let result = BigInt(0);\n\n  let curBytePos = Math.floor(bitPos / 8);\n  let curBitInBytePos = bitPos % 8;\n  const shift = 8 - curBitInBytePos;\n  let xLength = Math.min(bitsCount, shift);\n\n  if (xLength != 0) {\n    result = BigInt((data[curBytePos] >> shift - xLength) & ((1 << shift) - 1)) << BigInt(bitsCount - xLength);\n\n    curBytePos += Math.floor((curBitInBytePos + xLength) / 8);\n    curBitInBytePos = (curBitInBytePos + xLength) % 8;\n\n    let x2Length = bitsCount - xLength;\n    if (x2Length > 8) {\n      x2Length = 8;\n    }\n\n    while (x2Length > 0) {\n      xLength += x2Length;\n      result |= BigInt(data[curBytePos] >> 8 - x2Length) << BigInt(bitsCount - xLength);\n\n      curBytePos += Math.floor((curBitInBytePos + x2Length) / 8);\n      curBitInBytePos = (curBitInBytePos + x2Length) % 8;\n\n      x2Length = bitsCount - xLength;\n      if (x2Length > 8) {\n        x2Length = 8;\n      }\n    }\n  }\n\n  return result;\n}\n\nconst getOptimalBitsCount = ({ charsCount, maxBitsCount, radix }) => {\n  let bitsCount = 0;\n  let charsCountInBits = 0;\n  const n1 = logBaseN(charsCount, radix);\n  const charsCountLog = Math.log(radix) / Math.log(charsCount);\n  let maxRatio = 0;\n\n  for (let n = n1; n <= maxBitsCount; n++) {\n    let l1 = Math.ceil(n * charsCountLog);\n    let ratio = n / l1;\n    if (ratio > maxRatio) {\n      maxRatio = ratio;\n      bitsCount = n;\n      charsCountInBits = l1;\n    }\n  }\n\n  return { bitsCount, charsCountInBits };\n}\n\n// ???\nconst logBaseN = (x, n) => {\n  let r = 0;\n  while ((x = Math.floor(x / n)) !== 0) {\n    r++;\n  }  \n  return r;\n}","import { BaseN } from './BaseN';\n\n// adapted from https://github.com/lesspass/lesspass\n\nexport const calcPassword = async ({ profile, masterPassword }) => {\n  const { account, username, index, length } = profile;\n  const salt = account + username + index.toString(16);\n  const password = await pbkdf2er({ password: masterPassword, salt, iterations: 100000, digest: \"SHA-256\"});\n  return password.substring(0, length);\n}\n\nconst getAlphabet = () =>\n  '!\"#$%&\\'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~';\n\nfunction pbkdf2er({ password, salt, iterations, digest }) {\n  return window.crypto.subtle\n    .importKey(\n      \"raw\", // format\n      stringToArrayBuffer(password), // keyData\n      \"PBKDF2\", // algorithm\n      false, // extractable\n      [\"deriveKey\"] // keyUsages\n    ).then((key) => {\n      const algo = {\n        name: \"PBKDF2\",\n        salt: stringToArrayBuffer(salt),\n        iterations,\n        hash: digest,\n      };\n      return window.crypto.subtle.deriveKey(\n        algo, // algorithm\n        key, // baseKey\n        {\n          name: \"AES-CTR\",\n          length: 256,\n        }, // derivedKeyAlgorithm\n        true, // extractable\n        [\"encrypt\", \"decrypt\"] // keyUsages\n      );\n    }).then((derivedKey) =>\n      window.crypto.subtle.exportKey(\"raw\", derivedKey).then((keyArray) => {\n        const byteArr = bufferToByteArray(keyArray);\n\n        const converted = new BaseN({\n          alphabet: getAlphabet(),\n          blockMaxBitsCount: 32\n        }).encodeBytes(byteArr);\n\n        return converted;\n      })\n    );\n};\n\nfunction stringToArrayBuffer(string) {\n  const base64String = unescape(encodeURIComponent(string));\n  const charList = base64String.split(\"\");\n  const arrayBuffer = [];\n  for (let i = 0; i < charList.length; i += 1) {\n    arrayBuffer.push(charList[i].charCodeAt(0));\n  }\n  return new Uint8Array(arrayBuffer);\n}\n\nconst bufferToByteArray = (keyArray) => Array.from(new Uint8Array(keyArray));\n","\n\nimport { useEffect, useState } from 'react';\nimport { Button, Modal, Form } from 'react-bootstrap';\n\nexport const AddModal = ({ isOpen, save, cancel }) => {\n  const [account, setAccount] = useState('');\n  const [username, setUsername] = useState('');\n  const [length, setLength] = useState(16);\n  const [index, setIndex] = useState(1);\n  const [notes, setNotes] = useState('');\n  const [invalid, setInvalid] = useState([]);\n\n  useEffect(() => {\n    const newInvalid = [];\n    if (account === '') {\n      newInvalid.push('account');\n    }\n    if (username === '') {\n      newInvalid.push('username');\n    }\n    if (length < 16 || length > 40) { // this upper limit depends on the algo\n      newInvalid.push('length');\n    }\n    if (index < 1) {\n      newInvalid.push('index');\n    }\n    setInvalid(newInvalid);\n  }, [account, username, length, index]);\n\n  useEffect(() => {\n    setAccount('');\n    setUsername('');\n    setLength(16);\n    setIndex(1);\n    setNotes('');\n  }, [isOpen]);\n\n  const handleSave = () => {\n    save({ account, username, length, index, notes });\n  }\n\n  return (\n    <Modal show={isOpen} animation={false} onHide={cancel}>\n      <Modal.Header closeButton>\n        <Modal.Title>Modal title</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <Form>\n          <Form.Group>\n            <Form.Label>Account</Form.Label>\n            <Form.Control type=\"text\" isInvalid={invalid.includes('account')} value={account} onChange={e => setAccount(e.target.value)}/>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label>Username</Form.Label>\n            <Form.Control type=\"text\" isInvalid={invalid.includes('username')} value={username} onChange={e => setUsername(e.target.value)}/>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label>Length</Form.Label>\n            <Form.Control type=\"number\" isInvalid={invalid.includes('length')} value={length} onChange={e => setLength(e.target.value)}/>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label>Index</Form.Label>\n            <Form.Control type=\"number\" isInvalid={invalid.includes('index')} value={index} onChange={e => setIndex(e.target.value)}/>\n          </Form.Group>\n          <Form.Group>\n            <Form.Label>Notes</Form.Label>\n            <Form.Control type=\"text\" isInvalid={invalid.includes('notes')} value={notes} onChange={e => setNotes(e.target.value)}/>\n          </Form.Group>\n        </Form>\n      </Modal.Body>\n\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={cancel}>Cancel</Button>\n        <Button variant=\"primary\" disabled={invalid.length !== 0} onClick={handleSave}>Add</Button>\n      </Modal.Footer>\n    </Modal>\n  )\n}","\n\nimport { Button, Modal } from 'react-bootstrap';\n\nexport const DeleteModal = ({ isOpen, num, goDelete, cancel }) => {\n  return (\n    <Modal show={isOpen} animation={false} onHide={cancel}>\n      <Modal.Header closeButton>\n        <Modal.Title>Modal title</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <span>Delete {num} account{num === 1 ? '' : 's'}? This action cannot be reversed.</span>\n      </Modal.Body>\n\n      <Modal.Footer>\n        <Button variant=\"secondary\" onClick={cancel}>Cancel</Button>\n        <Button variant=\"danger\" onClick={goDelete}>Delete</Button>\n      </Modal.Footer>\n    </Modal>\n  )\n}","import React, { useEffect, useState, useReducer } from 'react';\nimport { Row, Col, Button, Form } from 'react-bootstrap';\nimport { AgGridColumn, AgGridReact } from 'ag-grid-react';\nimport _ from 'lodash';\n\nimport 'ag-grid-community/dist/styles/ag-grid.css';\nimport 'ag-grid-community/dist/styles/ag-theme-alpine.css';\n\nimport { useList } from './useList';\nimport { AddModal } from './components/AddModal';\nimport { DeleteModal } from './components/DeleteModal';\n\nconst btnStateReducer = (state, action) => {\n  const payload = action.payload;\n  switch (action.type) {\n    case 'select':\n      if (payload.length === 0) {\n        return { ...state, showEditBtn: false, showDeleteBtn: false, showClearBtn: false, showAddBtn: true };\n      } else {\n        return { ...state, showEditBtn: true, showDeleteBtn: true, showClearBtn: true, showAddBtn: false };\n      }\n    case 'add':\n      return { ...state, wantToAdd: payload };\n    case 'edit':\n      if (payload === 'start') {\n        return { ...state, showCheckboxes: false, amEditing: true, showEditBtn: true, showDeleteBtn: false, showClearBtn: false, showAddBtn: false };\n      } else {\n        return { ...state, showCheckboxes: true, amEditing: false, showEditBtn: true, showDeleteBtn: true, showClearBtn: true, showAddBtn: false };\n      }\n    case 'delete':\n      if (payload === 'open') {\n        return { ...state, wantToDelete: true };\n      } else if (payload === 0) {\n        return { ...state, wantToDelete: false };\n      } else {\n        return { ...state, wantToDelete: false, showEditBtn: false, showDeleteBtn: false, showClearBtn: false, showAddBtn: true };\n      }\n    case 'clear':\n      return { ...state, showEditBtn: false, showDeleteBtn: false, showClearBtn: false, showAddBtn: true };\n    default:\n      return state;\n  }\n}\n\nconst initialBtnState = {\n  showEditBtn: false,\n  amEditing: false,\n  showDeleteBtn: false,\n  wantToDelete: false,\n  showClearBtn: false,\n  showAddBtn: true,\n  wantToAdd: false,\n  showCheckboxes: true\n};\n\nexport const List = () => {\n  const [gridApi, setGridApi] = useState(null);\n  const [hideMasterPassword, setHideMasterPassword] = useState(true);\n  const [staticSelected, setStaticSelected] = useState([]);\n  const [btnState, dispatchBtn] = useReducer(btnStateReducer, initialBtnState)\n\n  const {\n    hide,\n    setMasterPassword,\n    accs,\n    addNewAcc,\n    updateAccs,\n    deleteAccs,\n    genPassword\n  } = useList();\n\n  const toggleMasterPasswordHidden = () => {\n    setHideMasterPassword(!hideMasterPassword);\n  }\n\n  const handleClear = () => {\n    setStaticSelected([]);\n    dispatchBtn({ type: 'clear' });\n    if (gridApi) {\n      gridApi.deselectAll();\n    }\n  }\n\n  const handleSelectionChange = () => {\n    dispatchBtn({ type: 'select', payload: gridApi.getSelectedRows() });\n  }\n\n  const handleAddNew = () => {\n    dispatchBtn({ type: 'add', payload: true });\n  }\n\n  const handleEdit = () => {\n    if (btnState.amEditing) {\n      gridApi.setRowData(accs);\n      dispatchBtn({ type: 'edit', payload: 'cancel' });\n    } else {\n      setStaticSelected(gridApi.getSelectedRows().map(r => r.id));\n      dispatchBtn({ type: 'edit', payload: 'start' });\n    }\n  }\n\n  const handleSaveEdit = () => {\n    dispatchBtn({ type: 'edit', payload: 'save' });\n    gridApi.stopEditing();\n    updateAccs(gridApi.getSelectedRows());\n  }\n\n  const handleDelete = () => {\n    setStaticSelected(gridApi.getSelectedRows().map(r => r.id));\n    dispatchBtn({ type: 'delete', payload: 'open' });\n  }\n\n  const handleGoDelete = () => {\n    setStaticSelected([]);\n    const accIds = gridApi.getSelectedRows().map(r => r.id);\n    dispatchBtn({ type: 'delete', payload: accIds.length });\n    deleteAccs(accIds);\n  }\n\n  const handleCancelDelete = () => {\n    dispatchBtn({ type: 'delete', payload: 0 })\n  }\n\n  const handleRowDataChanged = () => {\n    if (gridApi) {\n      if (gridApi.getSelectedRows().length === 0 && staticSelected.length > 0) {\n        gridApi.forEachNode(n => {\n            n.setSelected(staticSelected.includes(n.id));\n        });\n      }\n    }\n  }\n\n  const handleExport = () => {\n    if (gridApi) {\n      gridApi.exportDataAsCsv({\n        columnKeys: [\"account\", \"username\", \"length\", \"index\", \"notes\"]\n      });\n    }\n  }\n\n  const handleRowClick = async ({ data }) => {\n    if (!btnState.amEditing) {\n      navigator.clipboard.writeText(await genPassword(data));\n    }\n  }\n\n  useEffect(() => {\n    if (gridApi) {\n      if (btnState.amEditing) {\n        gridApi.setEnableCellTextSelection(false);\n      } else {\n        gridApi.setEnableCellTextSelection(true);\n      }\n    }\n  }, [btnState.amEditing]);  \n\n  return (\n    <>\n      {!hide && (\n      <div>\n        <AddModal\n          isOpen={btnState.wantToAdd}\n          save={(data) => { addNewAcc(data); dispatchBtn({ type: 'add', payload: false }); }}\n          cancel={() => dispatchBtn({ type: 'add', payload: false })}\n        />\n\n        <DeleteModal\n          isOpen={btnState.wantToDelete}\n          num={gridApi ? gridApi.getSelectedRows().length : 0}\n          goDelete={() => { handleGoDelete(); }}\n          cancel={() => { handleCancelDelete(); }}\n        />\n\n        <Form>\n          <Form.Group controlId=\"formBasicEmail\" className=\"mb-5\">\n            <Row>\n              <Col>\n                <Form.Label>Master Password</Form.Label>\n              </Col>\n            </Row>\n            <Row>\n              <Col className=\"d-flex\">\n                <Form.Control type={hideMasterPassword ? 'password' : 'text'} placeholder=\"\" onChange={e => setMasterPassword(e.target.value)}/>\n                <Button onClick={toggleMasterPasswordHidden} className={`ml-2${hideMasterPassword ? '' : ' px-4'}`}>\n                  {hideMasterPassword ? 'Reveal' : 'Hide'}\n                </Button>\n              </Col>\n            </Row>\n          </Form.Group>\n        </Form>\n\n        <div className=\"ag-theme-alpine mb-3\" style={{ height: 400 }}>\n          <AgGridReact\n            rowData={ _.cloneDeep(accs) }\n            onGridReady={({ api }) => setGridApi(api)}\n            defaultColDef={{\n              editable: ({ column, node }) => column.getColDef().suppressMovable && node.isSelected(),\n              resizable: true,\n              filter: true,\n              sortable: true,\n              suppressMovable: btnState.amEditing,\n            }}\n            onRowDataChanged={handleRowDataChanged}\n            singleClickEdit={true}\n            enableCellTextSelection={true}\n            rowSelection=\"multiple\"\n            onNewColumnsLoaded={() => { if (gridApi) { gridApi.refreshCells(); }}}\n            onSelectionChanged={handleSelectionChange}\n            suppressRowClickSelection={true}\n            getRowNodeId={r => r.id}\n            onRowClicked={handleRowClick}\n          >\n            <AgGridColumn field=\"id\" hide />\n            <AgGridColumn field=\"account\" flex={1} headerCheckboxSelection={btnState.showCheckboxes} checkboxSelection={btnState.showCheckboxes} />\n            <AgGridColumn field=\"username\" flex={1} />\n            <AgGridColumn field=\"length\" width={100} />\n            <AgGridColumn field=\"index\" width={100} />\n            <AgGridColumn field=\"notes\" flex={1} />\n          </AgGridReact>\n        </div>\n          \n        <Row className=\"mb-4\">\n          <Col className=\"d-flex justify-content-start\">\n            {btnState.showAddBtn && <Button className=\"mr-2\" onClick={handleAddNew}>Add New</Button>}\n            {gridApi && btnState.showClearBtn && <Button className=\"mr-2\" onClick={handleClear}>Clear</Button>}\n            {btnState.amEditing && <Button className=\"mr-2\" onClick={handleSaveEdit}>Save</Button>}\n            {btnState.showEditBtn && <Button className=\"mr-2\" onClick={handleEdit}>{btnState.amEditing ? \"Cancel\" : \"Edit\"}</Button>}\n            {btnState.showDeleteBtn && <Button onClick={handleDelete}>Delete</Button>}\n          </Col>\n          <Col className=\"d-flex justify-content-end\">\n            <Button onClick={handleExport}>Export to CSV</Button>\n          </Col>\n        </Row>\n      </div>)}\n    </>\n  )\n}","import { useEffect, useState } from 'react';\nimport { useRecoilValue, useRecoilState } from 'recoil';\nimport { v4 as uuidv4 } from 'uuid';\nimport _ from 'lodash';\n\nimport { addUserListener, updateUserAcc, deleteUserAcc } from '../DB';\nimport { loginState, LOGIN_ENUM, uidState } from '../Login/state';\nimport { masterPasswordState } from './state';\nimport { calcPassword } from '../crypto/encrypt';\n\nexport const useList = () => {\n  const [masterPassword, setMasterPassword] = useRecoilState(masterPasswordState);\n  const login = useRecoilValue(loginState);\n  const uid = useRecoilValue(uidState);\n  const [hide, setHide] = useState(true);\n  const [accs, setAccs] = useState([]);\n\n  useEffect(() => {\n    if (login === LOGIN_ENUM['in']) {\n      setHide(false);\n    } else {\n      setHide(true);\n    }\n  }, [login]);\n\n  useEffect(() => {\n    if (uid) {\n      const cb = s => {\n        const newAccs = s.docs.map(d => (\n          { ...d.data(), id: d.id }\n        ));\n        setAccs(newAccs);\n      };\n      return addUserListener({ uid, cb });\n    }\n  }, [uid]);\n\n  const addNewAcc = (data) => {\n    const uuid = uuidv4()\n    updateUserAcc({ uid, accId: uuid, data });\n    return uuid;\n  }\n\n  const updateAccs = (data) => {\n    data.forEach(({ id, ...rest }) => updateUserAcc({ uid, accId: id, data: rest }));\n  }\n\n  const deleteAccs = (data) => {\n    data.forEach(accId => deleteUserAcc({ uid, accId }));\n  }\n\n  const genPassword = async (profile) => {\n    const password = await calcPassword({ profile, masterPassword });\n    return password;\n  }\n\n  return {\n    hide,\n    setMasterPassword,\n    accs,\n    addNewAcc,\n    updateAccs,\n    deleteAccs,\n    genPassword\n  };\n}","import { RecoilRoot } from 'recoil';\n\nimport { connect } from './components/DB';\nimport { Login } from './components/Login';\nimport { List } from './components/List';\n\nimport './App.scss';\n\nfunction App() {\n  connect();\n\n  return (\n    <RecoilRoot>\n      <div className=\"container my-5\">\n        <List />\n        <Login />\n      </div>\n    </RecoilRoot>\n  );\n}\n\nexport default App;\n\n/*\n<!-- The core Firebase JS SDK is always required and must be listed first -->\n<script src=\"https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js\"></script>\n\n<!-- TODO: Add SDKs for Firebase products that you want to use\n     https://firebase.google.com/docs/web/setup#available-libraries -->\n<script src=\"https://www.gstatic.com/firebasejs/8.4.1/firebase-analytics.js\"></script>\n\n<script>\n  // Your web app's Firebase configuration\n  // For Firebase JS SDK v7.20.0 and later, measurementId is optional\n  var firebaseConfig = {\n    apiKey: \"AIzaSyBSR0d-BPHVVGdlCJcjaDNZhFSt9CH_7vU\",\n    authDomain: \"lesser-pass.firebaseapp.com\",\n    projectId: \"lesser-pass\",\n    storageBucket: \"lesser-pass.appspot.com\",\n    messagingSenderId: \"386351610572\",\n    appId: \"1:386351610572:web:0a5032f9797b7f4f452069\",\n    measurementId: \"G-C7WK4HJ5EJ\"\n  };\n  // Initialize Firebase\n  firebase.initializeApp(firebaseConfig);\n  firebase.analytics();\n</script>\n*/\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}