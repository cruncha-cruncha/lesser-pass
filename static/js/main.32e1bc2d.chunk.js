(this["webpackJsonplesser-pass"]=this["webpackJsonplesser-pass"]||[]).push([[0],{53:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(19),o=n.n(r),s=(n(53),n(18)),i=n(12),l=n.n(i),u=n(14),d=n(15),j=(n(71),n(38),n(44),{apiKey:"AIzaSyBSR0d-BPHVVGdlCJcjaDNZhFSt9CH_7vU",authDomain:"lesser-pass.firebaseapp.com",projectId:"lesser-pass",storageBucket:"lesser-pass.appspot.com",messagingSenderId:"386351610572",appId:"1:386351610572:web:0a5032f9797b7f4f452069",measurementId:"G-C7WK4HJ5EJ"}),h=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.a.apps.length){e.next=3;break}return e.next=3,d.a.initializeApp(j);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,a=t.cb,e.next=3,h();case 3:return c=d.a.firestore(),e.abrupt("return",c.collection("data").doc(n).collection("accounts").onSnapshot((function(e){return a(e)}),(function(e){})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,e.next=3,h();case 3:return a=d.a.firestore(),e.next=6,a.collection("data").doc(n).get().then(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.exists){e.next=3;break}return e.next=3,a.collection("data").doc(n).set({});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,a=t.accId,c=t.data,e.next=3,h();case 3:return r=d.a.firestore(),e.next=6,r.collection("data").doc(n).collection("accounts").doc(a).set(c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,a=t.accId,e.next=3,h();case 3:return c=d.a.firestore(),e.next=6,c.collection("data").doc(n).collection("accounts").doc(a).delete();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=n(74),g=n(46),w=n(78),v=0,m=1,C=2,y=3,B=4,k=Object(s.b)({key:"login",default:v}),S=Object(s.b)({key:"uid",default:""}),A=n(5),E=n(2),D=function(){var e=function(){var e=Object(s.c)(k),t=Object(A.a)(e,2),n=t[0],c=t[1],r=Object(s.c)(S),o=Object(A.a)(r,2),i=(o[0],o[1]);return Object(a.useEffect)((function(){n===m&&i("")}),[n]),{login:n,setLogin:c,setUid:i}}(),t=e.login,n=e.setLogin,c=e.setUid;return Object(a.useEffect)((function(){return d.a.auth().onAuthStateChanged((function(e){e?(c(e.uid),n(y),f({uid:e.uid})):n(m)}))}),[]),Object(E.jsx)(x.a,{children:Object(E.jsxs)(g.a,{className:"d-flex justify-content-end",children:[t===v&&Object(E.jsx)("span",{children:"loading"}),(t===m||t===C)&&Object(E.jsx)(w.a,{onClick:function(){n(C),d.a.auth().useDeviceLanguage();var e=new d.a.auth.GoogleAuthProvider;d.a.auth().signInWithRedirect(e)},disabled:t!==m,children:"Login"}),(t===y||t===B)&&Object(E.jsx)(w.a,{onClick:function(){n(B),d.a.auth().signOut().then((function(){n(m)}))},disabled:t!==y,children:"Logout"})]})})},I=n(7),M=n(76),N=n(24),R=n(27),T=n.n(R),G=(n(66),n(67),n(29)),P=n(77),L=Object(s.b)({key:"masterPassword",default:""});function F(e){var t=e.alphabet,n=e.blockMaxBitsCount;return Object.freeze({encodeBytes:function(e){if(!e||0===e.length)return"";for(var a=U({charsCount:t.length,maxBitsCount:n,radix:2}),c=a.bitsCount,r=a.charsCountInBits,o=Math.floor(8*e.length/c)*c,s=8*e.length-o,i=Math.floor(o*r/c),l=Math.floor((s*r+c-1)/c),u=Math.floor(i/r),d=[],j=0;j<u;j++){var h=K({data:e,bitPos:j*c,bitsCount:c});H({chars:d,ind:j*r,count:r,block:h,bigCharsCount:BigInt(t.length),alphabet:t})}if(0!=s){var b=K({data:e,bitPos:o,bitsCount:s});H({chars:d,ind:i,count:l,block:b,bigCharsCount:BigInt(t.length),alphabet:t})}return d.join("")}})}var H=function(e){for(var t=e.chars,n=e.ind,a=e.count,c=e.block,r=e.bigCharsCount,o=e.alphabet,s=T.a.cloneDeep(c),i=0;i<a;i++){var l=s%r;t[n+i]=o[l],s/=r}},K=function(e){var t=e.data,n=e.bitPos,a=e.bitsCount,c=BigInt(0),r=Math.floor(n/8),o=n%8,s=8-o,i=Math.min(a,s);if(0!=i){c=BigInt(t[r]>>s-i&(1<<s)-1)<<BigInt(a-i),r+=Math.floor((o+i)/8),o=(o+i)%8;var l=a-i;for(l>8&&(l=8);l>0;)i+=l,c|=BigInt(t[r]>>8-l)<<BigInt(a-i),r+=Math.floor((o+l)/8),o=(o+l)%8,(l=a-i)>8&&(l=8)}return c},U=function(e){for(var t=e.charsCount,n=e.maxBitsCount,a=e.radix,c=0,r=0,o=J(t,a),s=Math.log(a)/Math.log(t),i=0,l=o;l<=n;l++){var u=Math.ceil(l*s),d=l/u;d>i&&(i=d,c=l,r=u)}return{bitsCount:c,charsCountInBits:r}},J=function(e,t){for(var n=0;0!==(e=Math.floor(e/t));)n++;return n},z=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c,r,o,s,i,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.profile,a=t.masterPassword,c=n.account,r=n.username,o=n.index,s=n.length,i=c+r+o.toString(16),e.next=5,V({plainText:a,salt:i,iterations:25e4,digest:"SHA-256"});case 5:return u=e.sent,e.abrupt("return",u.substring(0,s));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function V(e){var t=e.plainText,n=e.salt,a=e.iterations,c=e.digest;return window.crypto.subtle.importKey("raw",W(t),"PBKDF2",!1,["deriveKey"]).then((function(e){var t={name:"PBKDF2",salt:W(n),iterations:a,hash:c};return window.crypto.subtle.deriveKey(t,e,{name:"AES-CTR",length:256},!0,["encrypt","decrypt"])})).then((function(e){return window.crypto.subtle.exportKey("raw",e).then((function(e){var t=Z(e);return new F({alphabet:"!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~",blockMaxBitsCount:32}).encodeBytes(t)}))}))}function W(e){for(var t=unescape(encodeURIComponent(e)).split(""),n=[],a=0;a<t.length;a+=1)n.push(t[a].charCodeAt(0));return new Uint8Array(n)}var Z=function(e){return Array.from(new Uint8Array(e))},_=n(75),q=function(e){var t=e.isOpen,n=e.save,c=e.cancel,r=Object(a.useState)(""),o=Object(A.a)(r,2),s=o[0],i=o[1],l=Object(a.useState)(""),u=Object(A.a)(l,2),d=u[0],j=u[1],h=Object(a.useState)(16),b=Object(A.a)(h,2),f=b[0],p=b[1],O=Object(a.useState)(1),x=Object(A.a)(O,2),g=x[0],v=x[1],m=Object(a.useState)(""),C=Object(A.a)(m,2),y=C[0],B=C[1],k=Object(a.useState)([]),S=Object(A.a)(k,2),D=S[0],I=S[1];Object(a.useEffect)((function(){var e=[];""===s&&e.push("account"),""===d&&e.push("username"),(f<16||f>40)&&e.push("length"),g<1&&e.push("index"),I(e)}),[s,d,f,g]),Object(a.useEffect)((function(){i(""),j(""),p(16),v(1),B("")}),[t]);return Object(E.jsxs)(_.a,{show:t,animation:!1,onHide:c,children:[Object(E.jsx)(_.a.Header,{closeButton:!0,children:Object(E.jsx)(_.a.Title,{children:"Modal title"})}),Object(E.jsx)(_.a.Body,{children:Object(E.jsxs)(M.a,{children:[Object(E.jsxs)(M.a.Group,{children:[Object(E.jsx)(M.a.Label,{children:"Account"}),Object(E.jsx)(M.a.Control,{type:"text",isInvalid:D.includes("account"),value:s,onChange:function(e){return i(e.target.value)}})]}),Object(E.jsxs)(M.a.Group,{children:[Object(E.jsx)(M.a.Label,{children:"Username"}),Object(E.jsx)(M.a.Control,{type:"text",isInvalid:D.includes("username"),value:d,onChange:function(e){return j(e.target.value)}})]}),Object(E.jsxs)(M.a.Group,{children:[Object(E.jsx)(M.a.Label,{children:"Length"}),Object(E.jsx)(M.a.Control,{type:"number",isInvalid:D.includes("length"),value:f,onChange:function(e){return p(e.target.value)}})]}),Object(E.jsxs)(M.a.Group,{children:[Object(E.jsx)(M.a.Label,{children:"Index"}),Object(E.jsx)(M.a.Control,{type:"number",isInvalid:D.includes("index"),value:g,onChange:function(e){return v(e.target.value)}})]}),Object(E.jsxs)(M.a.Group,{children:[Object(E.jsx)(M.a.Label,{children:"Notes"}),Object(E.jsx)(M.a.Control,{type:"text",isInvalid:D.includes("notes"),value:y,onChange:function(e){return B(e.target.value)}})]})]})}),Object(E.jsxs)(_.a.Footer,{children:[Object(E.jsx)(w.a,{variant:"secondary",onClick:c,children:"Cancel"}),Object(E.jsx)(w.a,{variant:"primary",disabled:0!==D.length,onClick:function(){n({account:s,username:d,length:f,index:g,notes:y})},children:"Add"})]})]})},Q=function(e){var t=e.isOpen,n=e.num,a=e.goDelete,c=e.cancel;return Object(E.jsxs)(_.a,{show:t,animation:!1,onHide:c,children:[Object(E.jsx)(_.a.Header,{closeButton:!0,children:Object(E.jsx)(_.a.Title,{children:"Modal title"})}),Object(E.jsx)(_.a.Body,{children:Object(E.jsxs)("span",{children:["Delete ",n," account",1===n?"":"s","? This action cannot be reversed."]})}),Object(E.jsxs)(_.a.Footer,{children:[Object(E.jsx)(w.a,{variant:"secondary",onClick:c,children:"Cancel"}),Object(E.jsx)(w.a,{variant:"danger",onClick:a,children:"Delete"})]})]})},X=function(e,t){var n=t.payload;switch(t.type){case"select":return 0===n.length?Object(I.a)(Object(I.a)({},e),{},{showEditBtn:!1,showDeleteBtn:!1,showClearBtn:!1,showAddBtn:!0}):Object(I.a)(Object(I.a)({},e),{},{showEditBtn:!0,showDeleteBtn:!0,showClearBtn:!0,showAddBtn:!1});case"add":return Object(I.a)(Object(I.a)({},e),{},{wantToAdd:n});case"edit":return"start"===n?Object(I.a)(Object(I.a)({},e),{},{showCheckboxes:!1,amEditing:!0,showEditBtn:!0,showDeleteBtn:!1,showClearBtn:!1,showAddBtn:!1}):Object(I.a)(Object(I.a)({},e),{},{showCheckboxes:!0,amEditing:!1,showEditBtn:!0,showDeleteBtn:!0,showClearBtn:!0,showAddBtn:!1});case"delete":return"open"===n?Object(I.a)(Object(I.a)({},e),{},{wantToDelete:!0}):0===n?Object(I.a)(Object(I.a)({},e),{},{wantToDelete:!1}):Object(I.a)(Object(I.a)({},e),{},{wantToDelete:!1,showEditBtn:!1,showDeleteBtn:!1,showClearBtn:!1,showAddBtn:!0});case"clear":return Object(I.a)(Object(I.a)({},e),{},{showEditBtn:!1,showDeleteBtn:!1,showClearBtn:!1,showAddBtn:!0});default:return e}},Y={showEditBtn:!1,amEditing:!1,showDeleteBtn:!1,wantToDelete:!1,showClearBtn:!1,showAddBtn:!0,wantToAdd:!1,showCheckboxes:!0},$=function(){var e=Object(a.useState)(null),t=Object(A.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),o=Object(A.a)(r,2),i=o[0],d=o[1],j=Object(a.useState)([]),h=Object(A.a)(j,2),f=h[0],v=h[1],m=Object(a.useReducer)(X,Y),C=Object(A.a)(m,2),B=C[0],D=C[1],R=function(){var e=Object(s.c)(L),t=Object(A.a)(e,2),n=t[0],c=t[1],r=Object(s.d)(k),o=Object(s.d)(S),i=Object(a.useState)(!0),d=Object(A.a)(i,2),j=d[0],h=d[1],f=Object(a.useState)([]),x=Object(A.a)(f,2),g=x[0],w=x[1];return Object(a.useEffect)((function(){h(r!==y)}),[r]),Object(a.useEffect)((function(){if(o)return b({uid:o,cb:function(e){var t=e.docs.map((function(e){return Object(I.a)(Object(I.a)({},e.data()),{},{id:e.id})}));w(t)}})}),[o]),{hide:j,setMasterPassword:c,accs:g,addNewAcc:function(e){var t=Object(P.a)();return p({uid:o,accId:t,data:e}),t},updateAccs:function(e){e.forEach((function(e){var t=e.id,n=Object(G.a)(e,["id"]);return p({uid:o,accId:t,data:n})}))},deleteAccs:function(e){e.forEach((function(e){return O({uid:o,accId:e})}))},genPassword:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z({profile:t,masterPassword:n});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}(),F=R.hide,H=R.setMasterPassword,K=R.accs,U=R.addNewAcc,J=R.updateAccs,V=R.deleteAccs,W=R.genPassword,Z=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,B.amEditing){e.next=7;break}return e.t0=navigator.clipboard,e.next=5,W(n);case 5:e.t1=e.sent,e.t0.writeText.call(e.t0,e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n&&(B.amEditing?n.setEnableCellTextSelection(!1):n.setEnableCellTextSelection(!0))}),[B.amEditing]),Object(E.jsx)(E.Fragment,{children:!F&&Object(E.jsxs)("div",{children:[Object(E.jsx)(q,{isOpen:B.wantToAdd,save:function(e){U(e),D({type:"add",payload:!1})},cancel:function(){return D({type:"add",payload:!1})}}),Object(E.jsx)(Q,{isOpen:B.wantToDelete,num:n?n.getSelectedRows().length:0,goDelete:function(){!function(){v([]);var e=n.getSelectedRows().map((function(e){return e.id}));D({type:"delete",payload:e.length}),V(e)}()},cancel:function(){D({type:"delete",payload:0})}}),Object(E.jsx)(M.a,{children:Object(E.jsxs)(M.a.Group,{controlId:"formBasicEmail",className:"mb-5",children:[Object(E.jsx)(x.a,{children:Object(E.jsx)(g.a,{children:Object(E.jsx)(M.a.Label,{children:"Master Password"})})}),Object(E.jsx)(x.a,{children:Object(E.jsxs)(g.a,{className:"d-flex",children:[Object(E.jsx)(M.a.Control,{type:i?"password":"text",placeholder:"",onChange:function(e){return H(e.target.value)}}),Object(E.jsx)(w.a,{onClick:function(){d(!i)},className:"ml-2".concat(i?"":" px-4"),children:i?"Reveal":"Hide"})]})})]})}),Object(E.jsx)("div",{className:"ag-theme-alpine mb-3",style:{height:400},children:Object(E.jsxs)(N.AgGridReact,{rowData:T.a.cloneDeep(K),onGridReady:function(e){var t=e.api;return c(t)},defaultColDef:{editable:function(e){var t=e.column,n=e.node;return t.getColDef().suppressMovable&&n.isSelected()},resizable:!0,filter:!0,sortable:!0,suppressMovable:B.amEditing},onRowDataChanged:function(){n&&0===n.getSelectedRows().length&&f.length>0&&n.forEachNode((function(e){e.setSelected(f.includes(e.id))}))},singleClickEdit:!0,enableCellTextSelection:!0,rowSelection:"multiple",onNewColumnsLoaded:function(){n&&n.refreshCells()},onSelectionChanged:function(){D({type:"select",payload:n.getSelectedRows()})},suppressRowClickSelection:!0,getRowNodeId:function(e){return e.id},onRowClicked:Z,children:[Object(E.jsx)(N.AgGridColumn,{field:"id",hide:!0}),Object(E.jsx)(N.AgGridColumn,{field:"account",flex:1,headerCheckboxSelection:B.showCheckboxes,checkboxSelection:B.showCheckboxes}),Object(E.jsx)(N.AgGridColumn,{field:"username",flex:1}),Object(E.jsx)(N.AgGridColumn,{field:"length",width:100}),Object(E.jsx)(N.AgGridColumn,{field:"index",width:100}),Object(E.jsx)(N.AgGridColumn,{field:"notes",flex:1})]})}),Object(E.jsxs)(x.a,{className:"mb-4",children:[Object(E.jsxs)(g.a,{className:"d-flex justify-content-start",children:[B.showAddBtn&&Object(E.jsx)(w.a,{className:"mr-2",onClick:function(){D({type:"add",payload:!0})},children:"Add New"}),n&&B.showClearBtn&&Object(E.jsx)(w.a,{className:"mr-2",onClick:function(){v([]),D({type:"clear"}),n&&n.deselectAll()},children:"Clear"}),B.amEditing&&Object(E.jsx)(w.a,{className:"mr-2",onClick:function(){D({type:"edit",payload:"save"}),n.stopEditing(),J(n.getSelectedRows())},children:"Save"}),B.showEditBtn&&Object(E.jsx)(w.a,{className:"mr-2",onClick:function(){B.amEditing?(n.setRowData(K),D({type:"edit",payload:"cancel"})):(v(n.getSelectedRows().map((function(e){return e.id}))),D({type:"edit",payload:"start"}))},children:B.amEditing?"Cancel":"Edit"}),B.showDeleteBtn&&Object(E.jsx)(w.a,{onClick:function(){v(n.getSelectedRows().map((function(e){return e.id}))),D({type:"delete",payload:"open"})},children:"Delete"})]}),Object(E.jsx)(g.a,{className:"d-flex justify-content-end",children:Object(E.jsx)(w.a,{onClick:function(){n&&n.exportDataAsCsv({columnKeys:["account","username","length","index","notes"]})},children:"Export to CSV"})})]})]})})};n(69);var ee=function(){return h(),Object(E.jsx)(s.a,{children:Object(E.jsxs)("div",{className:"container my-5",children:[Object(E.jsx)($,{}),Object(E.jsx)(D,{})]})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(ee,{})}),document.getElementById("root")),te()}},[[70,1,2]]]);
//# sourceMappingURL=main.32e1bc2d.chunk.js.map