(this["webpackJsonplesser-pass"]=this["webpackJsonplesser-pass"]||[]).push([[0],{55:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(19),i=n.n(r),o=(n(55),n(18)),s=n(12),l=n.n(s),u=n(14),d=n(15),b=(n(73),n(40),n(46),{apiKey:"AIzaSyBSR0d-BPHVVGdlCJcjaDNZhFSt9CH_7vU",authDomain:"lesser-pass.firebaseapp.com",projectId:"lesser-pass",storageBucket:"lesser-pass.appspot.com",messagingSenderId:"386351610572",appId:"1:386351610572:web:0a5032f9797b7f4f452069",measurementId:"G-C7WK4HJ5EJ"}),j=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.a.apps.length){e.next=3;break}return e.next=3,d.a.initializeApp(b);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid,a=t.cb,n&&a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,j();case 5:return c=d.a.firestore(),e.abrupt("return",c.collection("data").doc(n).collection("accounts").onSnapshot((function(e){return a(e)}),(function(e){})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,j();case 5:return a=d.a.firestore(),e.next=8,a.collection("data").doc(n).get().then(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.exists){e.next=3;break}return e.next=3,a.collection("data").doc(n).set({});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid,a=t.accId,c=t.data,n&&a&&c){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,j();case 5:return r=d.a.firestore(),e.next=8,r.collection("data").doc(n).collection("accounts").doc(a).set(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid,a=t.accId,n&&a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,j();case 5:return c=d.a.firestore(),e.next=8,c.collection("data").doc(n).collection("accounts").doc(a).delete();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=n(76),v=n(48),g=n(80),w=0,m=1,C=2,y=3,B=4,k=Object(o.b)({key:"login",default:w}),S=Object(o.b)({key:"uid",default:""}),A=n(6),E=n(2),D=function(){var e=function(){var e=Object(o.c)(k),t=Object(A.a)(e,2),n=t[0],c=t[1],r=Object(o.c)(S),i=Object(A.a)(r,2),s=(i[0],i[1]);return Object(a.useEffect)((function(){n===m&&s("")}),[n,s]),{login:n,setLogin:c,setUid:s}}(),t=e.login,n=e.setLogin,c=e.setUid;return Object(a.useEffect)((function(){return d.a.auth().onAuthStateChanged((function(e){e?(c(e.uid),n(y),f({uid:e.uid})):n(m)}))}),[c,n]),Object(E.jsx)(x.a,{children:Object(E.jsxs)(v.a,{className:"d-flex justify-content-end",children:[t===w&&Object(E.jsx)("span",{children:"loading"}),(t===m||t===C)&&Object(E.jsx)(g.a,{onClick:function(){n(C),d.a.auth().useDeviceLanguage();var e=new d.a.auth.GoogleAuthProvider;d.a.auth().signInWithRedirect(e)},disabled:t!==m,children:"Login"}),(t===y||t===B)&&Object(E.jsx)(g.a,{variant:"secondary",onClick:function(){n(B),d.a.auth().signOut().then((function(){n(m)}))},disabled:t!==y,children:"Logout"})]})})},I=n(5),N=n(78),T=n(24),P=n(26),M=n.n(P),R=(n(68),n(69),n(25)),G=n(31),L=n(79),F=Object(o.b)({key:"masterPassword",default:""});function H(e){var t=e.alphabet,n=e.blockMaxBitsCount;return Object.freeze({encodeBytes:function(e){if(!e||0===e.length)return"";for(var a=J({charsCount:t.length,maxBitsCount:n,radix:2}),c=a.bitsCount,r=a.charsCountInBits,i=Math.floor(8*e.length/c)*c,o=8*e.length-i,s=Math.floor(i*r/c),l=Math.floor((o*r+c-1)/c),u=Math.floor(s/r),d=[],b=0;b<u;b++){var j=U({data:e,bitPos:b*c,bitsCount:c});K({chars:d,ind:b*r,count:r,block:j,bigCharsCount:BigInt(t.length),alphabet:t})}if(0!=o){var h=U({data:e,bitPos:i,bitsCount:o});K({chars:d,ind:s,count:l,block:h,bigCharsCount:BigInt(t.length),alphabet:t})}return d.join("")}})}var K=function(e){for(var t=e.chars,n=e.ind,a=e.count,c=e.block,r=e.bigCharsCount,i=e.alphabet,o=M.a.cloneDeep(c),s=0;s<a;s++){var l=o%r;t[n+s]=i[l],o/=r}},U=function(e){var t=e.data,n=e.bitPos,a=e.bitsCount,c=BigInt(0),r=Math.floor(n/8),i=n%8,o=8-i,s=Math.min(a,o);if(0!=s){c=BigInt(t[r]>>o-s&(1<<o)-1)<<BigInt(a-s),r+=Math.floor((i+s)/8),i=(i+s)%8;var l=a-s;for(l>8&&(l=8);l>0;)s+=l,c|=BigInt(t[r]>>8-l)<<BigInt(a-s),r+=Math.floor((i+l)/8),i=(i+l)%8,(l=a-s)>8&&(l=8)}return c},J=function(e){for(var t=e.charsCount,n=e.maxBitsCount,a=e.radix,c=0,r=0,i=W(t,a),o=Math.log(a)/Math.log(t),s=0,l=i;l<=n;l++){var u=Math.ceil(l*o),d=l/u;d>s&&(s=d,c=l,r=u)}return{bitsCount:c,charsCountInBits:r}},W=function(e,t){for(var n=0;0!==(e=Math.floor(e/t));)n++;return n},z=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,c,r,i,o,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.profile,a=t.masterPassword,c=n.account,r=n.username,i=n.index,o=n.length,!(!i||!o||o<1||o>40)){e.next=4;break}return e.abrupt("return","");case 4:return s=c+r+i.toString(16),e.next=7,V({plainText:a,salt:s,iterations:25e4,digest:"SHA-256"});case 7:return u=e.sent,e.abrupt("return",u.substring(0,o));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function V(e){var t=e.plainText,n=e.salt,a=e.iterations,c=e.digest;return t&&n?window.crypto.subtle.importKey("raw",Z(t),"PBKDF2",!1,["deriveKey"]).then((function(e){var t={name:"PBKDF2",salt:Z(n),iterations:a,hash:c};return window.crypto.subtle.deriveKey(t,e,{name:"AES-CTR",length:256},!0,["encrypt","decrypt"])})).then((function(e){return window.crypto.subtle.exportKey("raw",e).then((function(e){var t=_(e);return new H({alphabet:"!\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~",blockMaxBitsCount:32}).encodeBytes(t)}))})):""}function Z(e){for(var t=unescape(encodeURIComponent(e)).split(""),n=[],a=0;a<t.length;a+=1)n.push(t[a].charCodeAt(0));return new Uint8Array(n)}var _=function(e){return Array.from(new Uint8Array(e))},q=function(e){var t=e.field,n=e.value;switch(t){case"account":return!n||n.length<1?{valid:!1}:n.length>140?{valid:!1,coerced:n.substring(0,140)}:{valid:!0,coerced:n};case"username":return!n||n.length<1?{valid:!1}:n.length>140?{valid:!1,coerced:n.substring(0,140)}:{valid:!0,coerced:n};case"length":return!n||n<1?{valid:!1,coerced:1}:n.length>40?{valid:!1,coerced:40}:{valid:!0,coerced:n};case"index":return n?{valid:!0,coerced:n}:{valid:!1,coerced:0};case"notes":return n&&n.length>512?{valid:!1,coerced:n.substring(0,512)}:{valid:!0,coerced:n};default:return{valid:!1}}},Q=n(27),X=n(77),Y=function(e){var t=e.isOpen,n=e.save,c=e.cancel,r=Object(a.useState)(""),i=Object(A.a)(r,2),o=i[0],s=i[1],l=Object(a.useState)(""),u=Object(A.a)(l,2),d=u[0],b=u[1],j=Object(a.useState)(24),h=Object(A.a)(j,2),f=h[0],p=h[1],O=Object(a.useState)(1),x=Object(A.a)(O,2),v=x[0],w=x[1],m=Object(a.useState)(""),C=Object(A.a)(m,2),y=C[0],B=C[1],k=Object(a.useState)([]),S=Object(A.a)(k,2),D=S[0],I=S[1];Object(a.useEffect)((function(){var e=[{field:"account",value:o},{field:"username",value:d},{field:"length",value:f},{field:"index",value:v},{field:"notes",value:y}].reduce((function(e,t){return q(t).valid?Object(Q.a)(e):[].concat(Object(Q.a)(e),[t.field])}),[]);I(e)}),[o,d,f,v,y]),Object(a.useEffect)((function(){s(""),b(""),p(24),w(1),B("")}),[t]);return Object(E.jsxs)(X.a,{show:t,animation:!1,onHide:c,children:[Object(E.jsx)(X.a.Header,{closeButton:!0,children:Object(E.jsx)(X.a.Title,{children:"New Password"})}),Object(E.jsx)(X.a.Body,{children:Object(E.jsxs)(N.a,{children:[Object(E.jsxs)(N.a.Group,{children:[Object(E.jsx)(N.a.Label,{children:"Account"}),Object(E.jsx)(N.a.Control,{type:"text",isInvalid:D.includes("account"),value:o,onChange:function(e){return s(e.target.value)}})]}),Object(E.jsxs)(N.a.Group,{children:[Object(E.jsx)(N.a.Label,{children:"Username"}),Object(E.jsx)(N.a.Control,{type:"text",isInvalid:D.includes("username"),value:d,onChange:function(e){return b(e.target.value)}})]}),Object(E.jsxs)(N.a.Group,{children:[Object(E.jsx)(N.a.Label,{children:"Length"}),Object(E.jsx)(N.a.Control,{type:"number",isInvalid:D.includes("length"),value:f,onChange:function(e){return p(e.target.value)}})]}),Object(E.jsxs)(N.a.Group,{children:[Object(E.jsx)(N.a.Label,{children:"Index"}),Object(E.jsx)(N.a.Control,{type:"number",isInvalid:D.includes("index"),value:v,onChange:function(e){return w(e.target.value)}})]}),Object(E.jsxs)(N.a.Group,{children:[Object(E.jsx)(N.a.Label,{children:"Notes"}),Object(E.jsx)(N.a.Control,{type:"text",isInvalid:D.includes("notes"),value:y,onChange:function(e){return B(e.target.value)}})]})]})}),Object(E.jsxs)(X.a.Footer,{children:[Object(E.jsx)(g.a,{variant:"secondary",onClick:c,children:"Cancel"}),Object(E.jsx)(g.a,{variant:"primary",disabled:0!==D.length,onClick:function(){n({account:o,username:d,length:f,index:v,notes:y})},children:"Add"})]})]})},$=function(e){var t=e.isOpen,n=e.num,a=e.goDelete,c=e.cancel;return Object(E.jsxs)(X.a,{show:t,animation:!1,onHide:c,children:[Object(E.jsx)(X.a.Header,{closeButton:!0,children:Object(E.jsx)(X.a.Title,{children:"Delete Password"})}),Object(E.jsx)(X.a.Body,{children:Object(E.jsxs)("span",{children:["Delete ",n," account",1===n?"":"s","? This action cannot be reversed."]})}),Object(E.jsxs)(X.a.Footer,{children:[Object(E.jsx)(g.a,{variant:"secondary",onClick:c,children:"Cancel"}),Object(E.jsx)(g.a,{variant:"danger",onClick:a,children:"Delete"})]})]})},ee=function(e,t){var n=t.payload;switch(t.type){case"select":return 0===n.length?Object(I.a)(Object(I.a)({},e),{},{showEditBtn:!1,showDeleteBtn:!1,showClearBtn:!1,showAddBtn:!0}):Object(I.a)(Object(I.a)({},e),{},{showEditBtn:!0,showDeleteBtn:!0,showClearBtn:!0,showAddBtn:!1});case"add":return Object(I.a)(Object(I.a)({},e),{},{wantToAdd:n});case"edit":return"start"===n?Object(I.a)(Object(I.a)({},e),{},{showCheckboxes:!1,amEditing:!0,showEditBtn:!0,showDeleteBtn:!1,showClearBtn:!1,showAddBtn:!1}):Object(I.a)(Object(I.a)({},e),{},{showCheckboxes:!0,amEditing:!1,showEditBtn:!0,showDeleteBtn:!0,showClearBtn:!0,showAddBtn:!1});case"delete":return"open"===n?Object(I.a)(Object(I.a)({},e),{},{wantToDelete:!0}):0===n?Object(I.a)(Object(I.a)({},e),{},{wantToDelete:!1}):Object(I.a)(Object(I.a)({},e),{},{wantToDelete:!1,showEditBtn:!1,showDeleteBtn:!1,showClearBtn:!1,showAddBtn:!0});case"clear":return Object(I.a)(Object(I.a)({},e),{},{showEditBtn:!1,showDeleteBtn:!1,showClearBtn:!1,showAddBtn:!0});default:return e}},te={showEditBtn:!1,amEditing:!1,showDeleteBtn:!1,wantToDelete:!1,showClearBtn:!1,showAddBtn:!0,wantToAdd:!1,showCheckboxes:!0},ne=function(){var e=Object(a.useState)(null),t=Object(A.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),i=Object(A.a)(r,2),s=i[0],d=i[1],b=Object(a.useState)([]),j=Object(A.a)(b,2),f=j[0],w=j[1],m=Object(a.useReducer)(ee,te),C=Object(A.a)(m,2),B=C[0],D=C[1],P=function(){var e=Object(o.c)(F),t=Object(A.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),i=Object(A.a)(r,2),s=i[0],d=i[1],b=Object(o.d)(k),j=Object(o.d)(S),f=Object(a.useState)(!0),x=Object(A.a)(f,2),v=x[0],g=x[1],w=Object(a.useState)([]),m=Object(A.a)(w,2),C=m[0],B=m[1];return Object(a.useEffect)((function(){g(b!==y)}),[b]),Object(a.useEffect)((function(){if(j)return h({uid:j,cb:function(e){var t=e.docs.map((function(e){return Object(I.a)(Object(I.a)({},e.data()),{},{id:e.id})}));B(t)}})}),[j]),Object(a.useEffect)((function(){if(n.length>0){clearTimeout(s);var e=setTimeout((function(){c(""),console.log("password cleared")}),3e5);d(e)}}),[n,c]),{hide:v,masterPassword:n,setMasterPassword:c,accs:C,addNewAcc:function(e){var t=Object(L.a)();return p({uid:j,accId:t,data:e}),t},updateAccs:function(e){e.next.forEach((function(e){var t=e.id,n=Object(G.a)(e,["id"]),a=[{field:"account",value:n.account},{field:"username",value:n.username},{field:"length",value:n.length},{field:"index",value:n.index},{field:"notes",value:n.notes}].reduce((function(e,t){if(null===e)return null;var n=q(t),a=n.valid,c=n.coerced;return a?Object(I.a)(Object(I.a)({},e),{},Object(R.a)({},t.field,t.value)):c?Object(I.a)(Object(I.a)({},e),{},Object(R.a)({},t.field,c)):null}),{});p({uid:j,accId:t,data:a})}))},deleteAccs:function(e){e.forEach((function(e){return O({uid:j,accId:e})}))},genPassword:function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n.length>0)){e.next=7;break}return e.next=3,z({profile:t,masterPassword:n});case 3:return a=e.sent,e.abrupt("return",a);case 7:return e.abrupt("return","");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}(),H=P.hide,K=P.masterPassword,U=P.setMasterPassword,J=P.accs,W=P.addNewAcc,V=P.updateAccs,Z=P.deleteAccs,_=P.genPassword,Q=function(){B.amEditing?(n.setRowData(J),D({type:"edit",payload:"cancel"})):(w(n.getSelectedRows().map((function(e){return e.id}))),D({type:"edit",payload:"start"}))},X=function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,B.amEditing){e.next=7;break}return e.t0=navigator.clipboard,e.next=5,_(n);case 5:e.t1=e.sent,e.t0.writeText.call(e.t0,e.t1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n&&(B.amEditing?n.setEnableCellTextSelection(!1):n.setEnableCellTextSelection(!0))}),[B.amEditing,n]),Object(E.jsx)(E.Fragment,{children:!H&&Object(E.jsxs)("div",{children:[Object(E.jsx)(Y,{isOpen:B.wantToAdd,save:function(e){W(e),D({type:"add",payload:!1})},cancel:function(){return D({type:"add",payload:!1})}}),Object(E.jsx)($,{isOpen:B.wantToDelete,num:n?n.getSelectedRows().length:0,goDelete:function(){!function(){w([]);var e=n.getSelectedRows().map((function(e){return e.id}));D({type:"delete",payload:e.length}),Z(e)}()},cancel:function(){D({type:"delete",payload:0})}}),Object(E.jsx)(N.a,{children:Object(E.jsxs)(N.a.Group,{controlId:"formBasicEmail",className:"mb-5",children:[Object(E.jsx)(x.a,{children:Object(E.jsx)(v.a,{children:Object(E.jsx)(N.a.Label,{children:"Master Password"})})}),Object(E.jsx)(x.a,{children:Object(E.jsxs)(v.a,{className:"d-flex",children:[Object(E.jsx)(N.a.Control,{type:s?"password":"text",placeholder:"",value:K,onChange:function(e){return U(e.target.value)}}),Object(E.jsx)(g.a,{onClick:function(){d(!s)},className:"ml-2".concat(s?"":" px-3"),children:s?"Show":"Hide"})]})})]})}),Object(E.jsx)("div",{className:"ag-theme-alpine mb-3",style:{height:400},children:Object(E.jsxs)(T.AgGridReact,{rowData:M.a.cloneDeep(J),onGridReady:function(e){var t=e.api;return c(t)},defaultColDef:{editable:function(e){var t=e.column,n=e.node;return t.getColDef().suppressMovable&&n.isSelected()},resizable:!0,filter:!0,sortable:!0,suppressMovable:B.amEditing},onRowDataChanged:function(){n&&0===n.getSelectedRows().length&&f.length>0&&n.forEachNode((function(e){e.setSelected(f.includes(e.id))}))},singleClickEdit:!0,enableCellTextSelection:!0,rowSelection:"multiple",onNewColumnsLoaded:function(){n&&n.refreshCells()},onSelectionChanged:function(){D({type:"select",payload:n.getSelectedRows()})},suppressRowClickSelection:!0,getRowNodeId:function(e){return e.id},onRowClicked:X,children:[Object(E.jsx)(T.AgGridColumn,{field:"id",hide:!0}),Object(E.jsx)(T.AgGridColumn,{field:"account",flex:1,headerCheckboxSelection:B.showCheckboxes,checkboxSelection:B.showCheckboxes,minWidth:150}),Object(E.jsx)(T.AgGridColumn,{field:"username",flex:1,minWidth:150}),Object(E.jsx)(T.AgGridColumn,{field:"length",width:100}),Object(E.jsx)(T.AgGridColumn,{field:"index",width:100}),Object(E.jsx)(T.AgGridColumn,{field:"notes",flex:1,minWidth:150})]})}),Object(E.jsxs)(x.a,{className:"mb-4",children:[Object(E.jsxs)(v.a,{className:"d-flex justify-content-start",children:[B.showAddBtn&&Object(E.jsx)(g.a,{className:"mr-2",onClick:function(){D({type:"add",payload:!0})},children:"Add New"}),B.showClearBtn&&Object(E.jsx)(g.a,{className:"mr-2",variant:"secondary",onClick:function(){w([]),D({type:"clear"}),n&&n.deselectAll()},children:"Cancel"}),B.showEditBtn&&(B.amEditing?Object(E.jsx)(g.a,{className:"mr-2",variant:"secondary",onClick:Q,children:"Cancel"}):Object(E.jsx)(g.a,{className:"mr-2",onClick:Q,children:"Edit"})),B.amEditing&&Object(E.jsx)(g.a,{className:"mr-2",onClick:function(){D({type:"edit",payload:"save"}),n.stopEditing(),V({next:n.getSelectedRows()}),n.setRowData(M.a.cloneDeep(J))},children:"Save"}),B.showDeleteBtn&&Object(E.jsx)(g.a,{variant:"danger",onClick:function(){w(n.getSelectedRows().map((function(e){return e.id}))),D({type:"delete",payload:"open"})},children:"Delete"})]}),Object(E.jsx)(v.a,{className:"d-flex justify-content-end",children:Object(E.jsx)(g.a,{variant:"secondary",onClick:function(){n&&n.exportDataAsCsv({columnKeys:["account","username","length","index","notes"]})},children:"Export to CSV"})})]})]})})};n(71);var ae=function(){return j(),Object(E.jsx)(o.a,{children:Object(E.jsxs)("div",{className:"container my-5",children:[Object(E.jsx)(ne,{}),Object(E.jsx)(D,{})]})})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,81)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(E.jsx)(c.a.StrictMode,{children:Object(E.jsx)(ae,{})}),document.getElementById("root")),ce()}},[[72,1,2]]]);
//# sourceMappingURL=main.5d1f48c0.chunk.js.map